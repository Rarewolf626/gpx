"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[290],{4413:(n,t)=>{t.Z=(n,t)=>{const e=n.__vccOpts||n;for(const[n,l]of t)e[n]=l;return e}},290:(n,t,e)=>{e.r(t),e.d(t,{default:()=>D});var l=e(9026),a=e(467),i=e(7401),u=e(7885),o=e(9577),d=e(1597),s=e(7866),c={key:0},r=[(0,l._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],_={key:1,class:"table-responsive"},f={class:"table data-table table-bordered table-condensed table-left"},v=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th"),(0,l._)("th",null,"Transaction ID"),(0,l._)("th",null,"Member Number"),(0,l._)("th",null,"Member Name"),(0,l._)("th",null,"Owned By"),(0,l._)("th",null,"Guest Name"),(0,l._)("th",null,"Resort Name"),(0,l._)("th",null,"Week Type"),(0,l._)("th",null,"Check In"),(0,l._)("th",null,"Paid"),(0,l._)("th",null,"Transaction Date"),(0,l._)("th",null,"Cancelled")])],-1),b={style:{"white-space":"nowrap"}},p=["href"],m=[(0,l._)("i",{class:"fa fa-external-link"},null,-1)],g=["onClick"],h=[(0,l._)("i",{class:"fa fa-eye"},null,-1)],k=["onClick"],w=(0,l._)("i",{class:"fa fa-edit",style:{"margin-right":"5px"}},null,-1),y=["textContent"],C=["onClick"],x=(0,l._)("i",{class:"fa fa-eye",style:{"margin-right":"1px"}},null,-1);const D={__name:"RoomTransactions",props:{id:{type:Number,required:!0}},setup:function(n){var t=n,e=(0,u.iH)(!1),D=(0,u.iH)([]),z=(0,u.iH)(null),q=(0,u.iH)(null),H=(0,u.iH)(null),N=function(){e.value=!1,axios.get("/gpxadmin/room_transactions/?id=".concat(t.id)).then((function(n){D.value=n.data,e.value=!0}))};return(0,l.bv)((function(){N()})),function(n,t){return(0,l.wg)(),(0,l.iD)("div",null,[e.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",c,r)),e.value&&D.value.length>0?((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("table",f,[v,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(D.value,(function(n){return(0,l.wg)(),(0,l.iD)("tr",{key:n.id},[(0,l._)("td",b,[(0,l._)("a",{href:n.view,target:"_blank",class:"btn btn-default btn-plain",style:{"margin-right":"5px"}},m,8,p),(0,l._)("button",{type:"button",class:"btn btn-default btn-plain",onClick:(0,a.iM)((function(t){return function(n){q.value.open(n)}(n.id)}),["prevent"])},h,8,g)]),(0,l._)("td",null,(0,i.zw)(n.id),1),(0,l._)("td",null,(0,i.zw)(n.user),1),(0,l._)("td",null,(0,i.zw)(n.member),1),(0,l._)("td",null,(0,i.zw)(n.owner),1),(0,l._)("td",null,[n.is_booking?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-default btn-plain",type:"button",onClick:(0,a.iM)((function(t){return function(n){H.value.open(n)}(n.id)}),["prevent"])},[w,(0,l._)("span",{textContent:(0,i.zw)(n.guest)},null,8,y)],8,k)):(0,l.kq)("",!0)]),(0,l._)("td",null,(0,i.zw)(n.resort),1),(0,l._)("td",null,(0,i.zw)(n.week_type),1),(0,l._)("td",null,(0,i.zw)(n.checkin),1),(0,l._)("td",null,(0,i.zw)(n.paid),1),(0,l._)("td",null,(0,i.zw)(n.date),1),(0,l._)("td",null,[n.cancelled?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-default btn-plain","data-target":"#transaction-cancelled-modal",onClick:(0,a.iM)((function(t){return function(n){z.value.open(n)}(n.id)}),["prevent"])},[x,(0,l.Uk)(" Yes ")],8,C)):(0,l.kq)("",!0),(0,l.wy)((0,l._)("span",null,"No",512),[[a.F8,!n.cancelled]])])])})),128))])])])):(0,l.kq)("",!0),(0,l.Wm)(o.Z,{ref_key:"cancellation",ref:z},null,512),(0,l.Wm)(d.Z,{ref_key:"details",ref:q,onUpdated:N},null,512),(0,l.Wm)(s.Z,{ref_key:"guest",ref:H,onUpdated:N},null,512)])}}}},9577:(n,t,e)=>{e.d(t,{Z:()=>D});var l=e(9026),a=e(7401),i=e(7885),u=function(n){return(0,l.dD)("data-v-42755f78"),n=n(),(0,l.Cn)(),n},o={class:"modal fade",id:"transaction-cancelled-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-cancelled-modal-label"},d={class:"modal-dialog",role:"document"},s={class:"modal-content"},c=u((function(){return(0,l._)("div",{class:"modal-header"},[(0,l._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,l._)("span",{"aria-hidden":"true"},"Ã—")]),(0,l._)("h4",{class:"modal-title",id:"transaction-cancelled-modal"}," Cancellation Details ")],-1)})),r={class:"modal-body"},_={key:0},f=[u((function(){return(0,l._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)}))],v={key:1},b=["textContent"],p={key:1,class:"details"},m=u((function(){return(0,l._)("div",null,[(0,l._)("strong",null,"Cancelled By")],-1)})),g=["textContent"],h=u((function(){return(0,l._)("div",null,[(0,l._)("strong",null,"Date")],-1)})),k=["textContent"],w=u((function(){return(0,l._)("div",null,[(0,l._)("strong",null,"Refunded")],-1)})),y=["textContent"],C=u((function(){return(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"},"Close")],-1)}));const x={__name:"TransactionCancellationDetails",setup:function(n,t){var e=t.expose,u=(0,i.iH)(!1),x=(0,i.iH)(""),D=(0,i.iH)(null),z=function(){x.value="",D.value=null};return(0,l.bv)((function(){jQuery("#transaction-cancelled-modal").on("hidden.bs.modal",(function(n){return z()}))})),e({open:function(n){u.value=!0,z(),jQuery("#transaction-cancelled-modal").modal("show"),axios.get("/gpxadmin/transactions/cancellation/",{params:{transaction:n}}).then((function(n){n.data.success?D.value=n.data.details:x.value=n.data.message||"An error occurred while retrieving the cancellation details.",u.value=!1})).catch((function(n){var t;x.value=(null===(t=n.response)||void 0===t?void 0:t.data.message)||"An error occurred while retrieving the cancellation details.",u.value=!1}))},close:function(){jQuery("#transaction-cancelled-modal").modal("hide"),z()}}),function(n,t){return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",d,[(0,l._)("div",s,[c,(0,l._)("div",r,[u.value?((0,l.wg)(),(0,l.iD)("div",_,f)):(0,l.kq)("",!0),u.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",v,[x.value?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"alert alert-danger",textContent:(0,a.zw)(x.value)},null,8,b)):(0,l.kq)("",!0),D.value?((0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",null,[m,(0,l._)("div",{textContent:(0,a.zw)(D.value.name)},null,8,g)]),(0,l._)("div",null,[h,(0,l._)("div",{textContent:(0,a.zw)(D.value.date)},null,8,k)]),(0,l._)("div",null,[w,(0,l._)("div",{textContent:(0,a.zw)(D.value.amount)},null,8,y)])])):(0,l.kq)("",!0)]))]),C])])])}}};const D=(0,e(4413).Z)(x,[["__scopeId","data-v-42755f78"]])}}]);