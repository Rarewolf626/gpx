"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[11],{4011:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ue});var n=a(9026),t=a(467),d=a(7401),i=a(7885),o={class:"modal fade",id:"hold-details-modal",tabindex:"-1",role:"dialog","aria-labelledby":"hold-details-modal-label"},u={class:"modal-dialog",role:"document"},s={class:"modal-content"},r=(0,n._)("div",{class:"modal-header"},[(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,n._)("span",{"aria-hidden":"true"},"×")]),(0,n._)("h4",{class:"modal-title",id:"hold-details-modal-label"}," Hold Details ")],-1),c={class:"modal-body"},v={key:0},m=[(0,n._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],h=["textContent"],_={key:1,class:"details"},f=(0,n._)("strong",null,"Owner:",-1),p=(0,n._)("strong",null,"Week:",-1),b=(0,n._)("strong",null,"Resort:",-1),w=(0,n._)("strong",null,"Room:",-1),g=(0,n._)("strong",null,"Check In:",-1),y=(0,n._)("li",null,[(0,n._)("strong",null,"Activity:")],-1),k={style:{"margin-left":"20px"}};const x={__name:"HoldPreview",emits:["updated"],setup:function(e,l){var a=l.expose,t=(l.emit,(0,i.iH)(!1)),x=(0,i.iH)(!1),H=(0,i.iH)(""),z=(0,i.iH)({}),D=(0,i.iH)({id:null}),C=(0,i.iH)({type:"cancel",action:"credit",amount:0}),R=function(){x.value=!1,H.value="",z.value={},D.value={id:null},C.value={type:"cancel",action:"credit",amount:0}},j=function(){t.value=!0,axios.get("/gpxadmin/room/holds/details/",{params:{id:D.value.id}}).then((function(e){e.data.success?(D.value=e.data.hold,x.value=!0):H.value=e.data.message||"An error occurred while retrieving the hold details.",t.value=!1})).catch((function(e){var l;H.value=(null===(l=e.response)||void 0===l?void 0:l.data.message)||"An error occurred while retrieving the hold details.",t.value=!1}))};return(0,n.bv)((function(){jQuery("#hold-details-modal").on("hidden.bs.modal",(function(e){return R()}))})),a({open:function(e){t.value=!0,R(),D.value.id=e,jQuery("#hold-details-modal").modal("show"),j()},close:function(){jQuery("#hold-details-modal").modal("hide"),R()}}),function(e,l){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",u,[(0,n._)("div",s,[r,(0,n._)("div",c,[t.value&&!x.value?((0,n.wg)(),(0,n.iD)("div",v,m)):(0,n.kq)("",!0),(0,n._)("div",null,[H.value?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"alert alert-danger",textContent:(0,d.zw)(H.value)},null,8,h)):(0,n.kq)("",!0),x.value?((0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("ul",null,[(0,n._)("li",null,[f,(0,n.Uk)(" "+(0,d.zw)(D.value.owner),1)]),(0,n._)("li",null,[p,(0,n.Uk)(" "+(0,d.zw)(D.value.week),1)]),(0,n._)("li",null,[b,(0,n.Uk)(" "+(0,d.zw)(D.value.resort),1)]),(0,n._)("li",null,[w,(0,n.Uk)(" "+(0,d.zw)(D.value.room_size),1)]),(0,n._)("li",null,[g,(0,n.Uk)(" "+(0,d.zw)(D.value.checkin),1)]),y,(0,n._)("ul",k,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(D.value.activity,(function(e){return(0,n.wg)(),(0,n.iD)("li",{key:e.time},[(0,n._)("strong",null,(0,d.zw)(e.time),1),(0,n.Uk)(" "+(0,d.zw)(e.action)+" by "+(0,d.zw)(e.user),1)])})),128))])])])):(0,n.kq)("",!0)])])])])])}}};var H={class:"modal fade",id:"hold-extend-modal",tabindex:"-1",role:"dialog","aria-labelledby":"hold-details-modal-label"},z={class:"modal-dialog",role:"document"},D=(0,n._)("div",{class:"modal-header"},[(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,n._)("span",{"aria-hidden":"true"},"×")]),(0,n._)("h4",{class:"modal-title",id:"hold-extend-modal-label"}," Extend Hold ")],-1),C={class:"modal-body"},R={key:0},j=[(0,n._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],q=["textContent"],A={key:1,class:"details"},U={class:"form-group"},Q=(0,n._)("label",{for:"hold-extend-date"},"Release On",-1),W=["disabled","min","max"],S={class:"modal-footer"},I=(0,n._)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"},"Cancel",-1),M=["disabled"];const O={__name:"HoldExtend",emits:["updated"],setup:function(e,l){var a=l.expose,o=l.emit,u=(0,i.iH)(!1),s=(0,i.iH)(!1),r=(0,i.iH)(""),c=(0,i.iH)({}),v=(0,i.iH)(null),m=(new Date).toISOString().split("T")[0],h=(0,i.iH)({id:null}),_=function(){s.value=!1,r.value="",c.value={},h.value={id:null},v.value=null},f=function(){u.value=!0,axios.get("/gpxadmin/room/holds/details/",{params:{id:h.value.id}}).then((function(e){e.data.success?(h.value=e.data.hold,v.value=null,s.value=!0):r.value=e.data.message||"An error occurred while retrieving the hold details.",u.value=!1})).catch((function(e){var l;r.value=(null===(l=e.response)||void 0===l?void 0:l.data.message)||"An error occurred while retrieving the hold details.",u.value=!1}))},p=function(){w.value&&(u.value=!0,r.value="",axios.post("".concat(window.ajaxurl,"?action=gpx_extend_week"),{id:h.value.id,newdate:v.value}).then((function(e){e.data.success?(o("updated"),b()):r.value=e.data.error||"An error occurred while releasing the hold.",u.value=!1})).catch((function(e){var l;r.value=(null===(l=e.response)||void 0===l?void 0:l.data.error)||"An error occurred while releasing the hold.",u.value=!1})))},b=function(){jQuery("#hold-extend-modal").modal("hide"),_()},w=(0,n.Fl)((function(){return!u.value&&s.value&&v.value}));return(0,n.bv)((function(){jQuery("#hold-extend-modal").on("hidden.bs.modal",(function(e){return _()}))})),a({open:function(e){u.value=!0,_(),h.value.id=e,jQuery("#hold-extend-modal").modal("show"),f()},close:b}),function(e,l){return(0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("div",z,[(0,n._)("form",{class:"modal-content",onSubmit:(0,t.iM)(p,["prevent"])},[D,(0,n._)("div",C,[u.value&&!s.value?((0,n.wg)(),(0,n.iD)("div",R,j)):(0,n.kq)("",!0),(0,n._)("div",null,[r.value?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"alert alert-danger",textContent:(0,d.zw)(r.value)},null,8,q)):(0,n.kq)("",!0),s.value?((0,n.wg)(),(0,n.iD)("div",A,[(0,n._)("div",null," Currently releases on "+(0,d.zw)(h.value.release_on),1),(0,n._)("div",U,[Q,(0,n.wy)((0,n._)("input",{type:"date",class:"form-control",id:"hold-extend-date",disabled:u.value,min:(0,i.SU)(m),max:h.value.checkin_iso,"onUpdate:modelValue":l[0]||(l[0]=function(e){return v.value=e})},null,8,W),[[t.nr,v.value]])])])):(0,n.kq)("",!0)])]),(0,n._)("div",S,[I,(0,n._)("button",{type:"submit",class:"btn btn-primary",disabled:!w.value},"Extend Hold",8,M)])],32)])])}}};var E={class:"modal fade",id:"hold-release-modal",tabindex:"-1",role:"dialog","aria-labelledby":"hold-release-modal-label"},F={class:"modal-dialog",role:"document"},K={class:"modal-content"},N=(0,n._)("div",{class:"modal-header"},[(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,n._)("span",{"aria-hidden":"true"},"×")]),(0,n._)("h4",{class:"modal-title",id:"hold-release-modal-label"}," Release Hold ")],-1),P={class:"modal-body"},Y={key:0},G=[(0,n._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],T=["textContent"],V={key:1,class:"details"},B=[(0,n._)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"},"Cancel",-1),(0,n._)("button",{type:"submit",class:"btn btn-primary"},"Release Hold",-1)];const J={__name:"HoldRelease",emits:["updated"],setup:function(e,l){var a=l.expose,o=l.emit,u=(0,i.iH)(!1),s=(0,i.iH)(!1),r=(0,i.iH)(""),c=(0,i.iH)({}),v=(0,i.iH)({id:null}),m=function(){s.value=!1,r.value="",c.value={},v.value={id:null}},h=function(){u.value=!0,axios.get("/gpxadmin/room/holds/details/",{params:{id:v.value.id}}).then((function(e){e.data.success?(v.value=e.data.hold,s.value=!0):r.value=e.data.message||"An error occurred while retrieving the hold details.",u.value=!1})).catch((function(e){var l;r.value=(null===(l=e.response)||void 0===l?void 0:l.data.message)||"An error occurred while retrieving the hold details.",u.value=!1}))},_=function(){u.value=!0,axios.post("".concat(window.ajaxurl,"?action=gpx_release_week"),{id:v.value.id}).then((function(e){e.data.success?(o("updated"),f()):r.value=e.data.message||"An error occurred while releasing the hold.",u.value=!1})).catch((function(e){var l;r.value=(null===(l=e.response)||void 0===l?void 0:l.data.message)||"An error occurred while releasing the hold.",u.value=!1}))},f=function(){jQuery("#hold-release-modal").modal("hide"),m()};return(0,n.bv)((function(){jQuery("#hold-release-modal").on("hidden.bs.modal",(function(e){return m()}))})),a({open:function(e){u.value=!0,m(),v.value.id=e,jQuery("#hold-release-modal").modal("show"),h()},close:f}),function(e,l){return(0,n.wg)(),(0,n.iD)("div",E,[(0,n._)("div",F,[(0,n._)("div",K,[N,(0,n._)("div",P,[u.value&&!s.value?((0,n.wg)(),(0,n.iD)("div",Y,G)):(0,n.kq)("",!0),(0,n._)("div",null,[r.value?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"alert alert-danger",textContent:(0,d.zw)(r.value)},null,8,T)):(0,n.kq)("",!0),s.value?((0,n.wg)(),(0,n.iD)("div",V," Are you sure you want to release the hold? ")):(0,n.kq)("",!0)])]),(0,n._)("form",{class:"modal-footer",onSubmit:(0,t.iM)(_,["prevent"])},B,32)])])])}}};var L={key:0},X=[(0,n._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],Z={key:1,class:"table-responsive"},$={class:"table data-table table-bordered table-condensed table-left"},ee=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th"),(0,n._)("th",null,"Owner Name"),(0,n._)("th",null,"GPR ID"),(0,n._)("th",null,"Week ID"),(0,n._)("th",null,"Resort"),(0,n._)("th",null,"Room Size"),(0,n._)("th",null,"Check In"),(0,n._)("th",null,"Release On"),(0,n._)("th",null,"Released")])],-1),le={style:{display:"flex","justify-content":"start","align-items":"center",gap:"5px"}},ae=["onClick"],ne=[(0,n._)("i",{class:"fa fa-eye"},null,-1)],te=["onClick"],de=[(0,n._)("i",{class:"fa fa-calendar-plus-o"},null,-1)],ie=["onClick"],oe=[(0,n._)("i",{class:"fa fa-calendar-times-o"},null,-1)];const ue={__name:"RoomHolds",props:{id:{type:Number,required:!0}},setup:function(e){var l=e,a=(0,i.iH)(!1),o=(0,i.iH)([]),u=(0,i.iH)(null),s=(0,i.iH)(null),r=(0,i.iH)(null),c=function(){a.value=!1,axios.get("/gpxadmin/room/holds/?id=".concat(l.id)).then((function(e){o.value=e.data,a.value=!0}))};return(0,n.bv)((function(){c()})),function(e,l){return(0,n.wg)(),(0,n.iD)("div",null,[a.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",L,X)),a.value&&o.value.length>0?((0,n.wg)(),(0,n.iD)("div",Z,[(0,n._)("table",$,[ee,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.value,(function(e){return(0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",le,[(0,n._)("button",{type:"button",class:"btn btn-default btn-plain",onClick:(0,t.iM)((function(l){return u.value.open(e.id)}),["prevent"])},ne,8,ae),(0,n.wy)((0,n._)("button",{type:"button",class:"btn btn-default btn-plain",onClick:(0,t.iM)((function(l){return s.value.open(e.id)}),["prevent"]),title:"Extend Week"},de,8,te),[[t.F8,e.can_extend]]),(0,n.wy)((0,n._)("button",{type:"button",class:"btn btn-default btn-plain",onClick:(0,t.iM)((function(l){return r.value.open(e.id)}),["prevent"]),title:"Release Week"},oe,8,ie),[[t.F8,e.can_release]])]),(0,n._)("td",null,(0,d.zw)(e.owner),1),(0,n._)("td",null,(0,d.zw)(e.user),1),(0,n._)("td",null,(0,d.zw)(e.week),1),(0,n._)("td",null,(0,d.zw)(e.resort),1),(0,n._)("td",null,(0,d.zw)(e.room_size),1),(0,n._)("td",null,(0,d.zw)(e.checkin),1),(0,n._)("td",null,(0,d.zw)(e.release_on),1),(0,n._)("td",null,(0,d.zw)(e.released),1)])})),128))])])])):(0,n.kq)("",!0),(0,n.Wm)(x,{ref_key:"details",ref:u,onUpdated:c},null,512),(0,n.Wm)(O,{ref_key:"extend",ref:s,onUpdated:c},null,512),(0,n.Wm)(J,{ref_key:"release",ref:r,onUpdated:c},null,512)])}}}}}]);