"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[928],{7925:(t,e,a)=>{a.d(e,{G:()=>n,L:()=>l});var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(""===t||null===t||isNaN(Number(t))){if(!e)return null;t=0}return Number(t).toLocaleString(void 0,{style:"currency",currency:"USD"})},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""===t||null===t||isNaN(Number(t))?0:Number(Math.round(t+"e"+e)+"e-"+e)}},3999:(t,e,a)=>{a.d(e,{A:()=>p});var n=a(7829),l=a(9608),s={class:"well"},o=(0,n.Lk)("h3",null,"Deposit",-1),i={class:"table table-details w-auto"},r=(0,n.Lk)("th",null,"Ref No:",-1),u=["textContent"],c=(0,n.Lk)("th",null,"Resort Name:",-1),d=["textContent"],v=(0,n.Lk)("th",null,"Deposit Year:",-1),f=["textContent"],k=(0,n.Lk)("th",null,"Unit:",-1),b=["textContent"];const p={__name:"TransactionDetailsDeposit",props:{transaction:{type:Object,required:!0}},setup:function(t){return function(e,a){return(0,n.uX)(),(0,n.CE)("div",s,[o,(0,n.Lk)("table",i,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[r,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.deposit.id)},null,8,u)]),(0,n.Lk)("tr",null,[c,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.deposit.resort)},null,8,d)]),(0,n.Lk)("tr",null,[v,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.deposit.year)},null,8,f)]),(0,n.Lk)("tr",null,[k,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.deposit.unit)},null,8,b)])])])])}}}},7056:(t,e,a)=>{a.d(e,{A:()=>Q});var n=a(7829),l=a(9608),s=a(3102),o=a(6685),i=a(7690),r={class:"well"},u=["textContent"],c={class:"table table-details w-auto"},d=(0,n.Lk)("th",null,"Member Number:",-1),v=["textContent"],f=(0,n.Lk)("th",null,"Member Name:",-1),k=["textContent"],b={key:0},p=(0,n.Lk)("th",null,"Guest Name:",-1),m=(0,n.Lk)("i",{class:"fa fa-edit",style:{"margin-right":"5px"}},null,-1),L=["textContent"],g=["textContent"],h={key:1},y=(0,n.Lk)("th",null,"Adults:",-1),x=["textContent"],C={key:2},_=(0,n.Lk)("th",null,"Children:",-1),R=["textContent"],E={key:3},w=(0,n.Lk)("th",null,"Special Request:",-1),X=["textContent"];const Q={__name:"TransactionDetailsGuest",props:{transaction:{type:Object,required:!0},readonly:{type:Boolean,default:!1},busy:{type:Boolean,default:!1}},emits:["updated","busy"],setup:function(t,e){var a=e.emit,Q=t,G=a,A=(0,o.KR)(null),D=function(){A.value.open(Q.transaction.id)},F=function(){G("updated")};return function(e,a){return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("h3",{textContent:(0,l.v_)(t.transaction.has_guest?"Guest Info":"Member Info")},null,8,u),(0,n.Lk)("table",c,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[d,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.user_id)},null,8,v)]),(0,n.Lk)("tr",null,[f,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.member)},null,8,k)]),t.transaction.has_guest?((0,n.uX)(),(0,n.CE)("tr",b,[p,(0,n.Lk)("td",null,[!t.readonly&&t.transaction.is_booking?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn btn-default btn-plain",type:"button",onClick:(0,s.D$)(D,["prevent"])},[m,(0,n.Lk)("span",{textContent:(0,l.v_)(t.transaction.guest)},null,8,L)])):((0,n.uX)(),(0,n.CE)("span",{key:1,textContent:(0,l.v_)(t.transaction.guest)},null,8,g))])])):(0,n.Q3)("",!0),t.transaction.has_guest?((0,n.uX)(),(0,n.CE)("tr",h,[y,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.adults)},null,8,x)])):(0,n.Q3)("",!0),t.transaction.has_guest?((0,n.uX)(),(0,n.CE)("tr",C,[_,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.children)},null,8,R)])):(0,n.Q3)("",!0),t.transaction.special_request?((0,n.uX)(),(0,n.CE)("tr",E,[w,(0,n.Lk)("td",null,[(0,n.Lk)("div",{textContent:(0,l.v_)(t.transaction.special_request),style:{width:"100%","white-space":"pre-wrap",overflow:"auto"}},null,8,X)])])):(0,n.Q3)("",!0)])]),t.readonly?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(i.A,{key:0,ref_key:"guest",ref:A,onUpdated:F},null,512))])}}}},1753:(t,e,a)=>{a.d(e,{A:()=>c});var n=a(7829),l={key:0,class:"well"},s=(0,n.Lk)("h3",null,"Original Transaction",-1),o=(0,n.Lk)("div",{style:{"margin-bottom":"10px"}}," This is a guest fee charged for modifying the guest for another transaction. ",-1),i={key:0},r=["href"],u={key:1,class:"alert alert-error"};const c={__name:"TransactionDetailsGuestModification",props:{transaction:{type:Object,required:!0}},setup:function(t){return function(e,a){return t.transaction.is_guest?((0,n.uX)(),(0,n.CE)("div",l,[s,o,t.transaction.parent_transaction?((0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("a",{class:"btn btn-info",href:t.transaction.parent_transaction_url},"View Original Transaction",8,r)])):((0,n.uX)(),(0,n.CE)("div",u," Original Booking Information not available. Transaction prior to checkup upgrade. "))])):(0,n.Q3)("",!0)}}}},555:(t,e,a)=>{a.d(e,{A:()=>L});var n=a(7829),l=a(9608),s={class:"well"},o=(0,n.Lk)("h3",null,"Resort / Room Info",-1),i={class:"table table-details w-auto"},r=(0,n.Lk)("th",null,"Ref No:",-1),u=["textContent"],c=(0,n.Lk)("th",null,"Resort Name:",-1),d=["textContent"],v=(0,n.Lk)("th",null,"Size:",-1),f=["textContent"],k=(0,n.Lk)("th",null,"Check In:",-1),b=["textContent"],p=(0,n.Lk)("th",null,"Nights:",-1),m=["textContent"];const L={__name:"TransactionDetailsRoom",props:{transaction:{type:Object,required:!0}},setup:function(t){return function(e,a){return(0,n.uX)(),(0,n.CE)("div",s,[o,(0,n.Lk)("table",i,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[r,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.week)},null,8,u)]),(0,n.Lk)("tr",null,[c,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.resort)},null,8,d)]),(0,n.Lk)("tr",null,[v,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.size)},null,8,f)]),(0,n.Lk)("tr",null,[k,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.checkin)},null,8,b)]),(0,n.Lk)("tr",null,[p,(0,n.Lk)("td",{textContent:(0,l.v_)(t.transaction.nights)},null,8,m)])])])])}}}},6180:(t,e,a)=>{a.d(e,{A:()=>fe});var n=a(7829),l=a(9608),s=a(6685),o=a(3102),i=a(7925),r={class:"well"},u=(0,n.Lk)("h3",null,"Fees",-1),c={key:0,class:"alert alert-danger"},d={class:"table table-details w-auto"},v=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Fee"),(0,n.Lk)("th",{class:"text-right"},"Amount"),(0,n.Lk)("th",{class:"text-right"},"Refunded"),(0,n.Lk)("th",{class:"text-right"},"Balance")])],-1),f=(0,n.Lk)("th",null," Exchange/Rental Fee: ",-1),k={class:"text-right"},b={class:"text-right"},p={class:"text-right"},m=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],L={key:0},g=(0,n.Lk)("th",null,"Flex Booking Fee:",-1),h={class:"text-right"},y={class:"text-right"},x={class:"text-right"},C=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],_={key:1},R=(0,n.Lk)("th",null,"Upgrade Fee:",-1),E={class:"text-right"},w={class:"text-right"},X={class:"text-right"},Q=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],G={key:2},A=(0,n.Lk)("th",null,"Guest Fee:",-1),D={class:"text-right"},F={class:"text-right"},T={class:"text-right"},N=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],U={key:3},K=(0,n.Lk)("th",null,"Late Deposit Fee:",-1),j={class:"text-right"},V={class:"text-right"},W={class:"text-right"},$=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],O={key:4},B=(0,n.Lk)("th",null,"Third Party Deposit Fee:",-1),q={class:"text-right"},J={class:"text-right"},M={class:"text-right"},P=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],S={key:5},I=(0,n.Lk)("th",null,"Credit Extension Fee:",-1),z={class:"text-right"},Y={class:"text-right"},H={class:"text-right"},Z=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],tt={key:6},et=(0,n.Lk)("th",null,"Tax Charged:",-1),at={class:"text-right"},nt={class:"text-right"},lt={class:"text-right"},st=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)],ot={key:7},it=(0,n.Lk)("th",null,"Coupon:",-1),rt={class:"text-right"},ut=(0,n.Lk)("td",{class:"text-right"}," ---- ",-1),ct={class:"text-right"},dt=(0,n.Lk)("th",null,"Total:",-1),vt={class:"text-right"},ft={class:"text-right"},kt={class:"text-right"},bt=(0,n.Lk)("h4",null,"Paid",-1),pt={class:"table table-details w-auto"},mt=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th"),(0,n.Lk)("th",{class:"text-right"},"Paid"),(0,n.Lk)("th",{class:"text-right"},"Refunded")])],-1),Lt=(0,n.Lk)("th",null,"Monetary Credit:",-1),gt={class:"text-right"},ht={class:"text-right"},yt={class:"text-right"},xt={class:"text-right"},Ct=(0,n.Lk)("th",null,"Total:",-1),_t={class:"text-right"},Rt={class:"text-right"},Et=(0,n.Lk)("th",null,"Balance",-1),wt=(0,n.Lk)("td",null,null,-1),Xt={class:"text-right"},Qt={key:1,class:"alert alert-info"},Gt={class:"modal fade",id:"transaction-fee-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-fee-modal-label","data-backdrop":"static"},At={class:"modal-dialog",role:"document"},Dt={class:"modal-content"},Ft={class:"modal-header"},Tt=["disabled"],Nt=[(0,n.Lk)("span",{"aria-hidden":"true"},"×",-1)],Ut={class:"modal-title",id:"transaction-fee-modal-label"},Kt={class:"modal-body"},jt=["textContent"],Vt={class:"form-row"},Wt={class:"col-sm-4"},$t={class:"form-group"},Ot=(0,n.Lk)("label",{for:"transaction-fee-original",class:"control-label"},"Original Fee",-1),Bt={id:"transaction-fee-original",class:"form-control-static"},qt={class:"col-sm-4"},Jt={class:"form-group"},Mt=(0,n.Lk)("label",{for:"transaction-fee-refunded",class:"control-label"},"Already Refunded",-1),Pt={id:"transaction-fee-refunded",class:"form-control-static"},St={class:"col-sm-4"},It={class:"form-group"},zt=(0,n.Lk)("label",{for:"transaction-fee-refunded",class:"control-label"},"Remaining Fee",-1),Yt={id:"transaction-fee-refunded",class:"form-control-static"},Ht={class:"form-row"},Zt={class:"col-sm-6"},te=(0,n.Lk)("label",{for:"transaction-fee-amount",class:"control-label"},"Refund Amount",-1),ee={class:"input-group"},ae=(0,n.Lk)("span",{class:"input-group-addon"},"$",-1),ne=["max","disabled"],le={class:"col-sm-6"},se={key:0,class:"form-group"},oe=(0,n.Lk)("label",{for:"transaction-fee-action",class:"control-label"},"Action",-1),ie=["disabled"],re=[(0,n.Lk)("option",{value:"credit"},"Credit Owner",-1),(0,n.Lk)("option",{value:"refund"},"Refund Credit Card",-1)],ue={class:"modal-footer"},ce=["disabled"],de={class:"fa fa-spinner fa-spin",style:{"margin-left":"2px"}},ve=["disabled"];const fe={__name:"TransactionFees",props:{transaction:{type:Object,required:!0},readonly:{type:Boolean,default:!0},busy:{type:Boolean,default:!1}},emits:["updated","busy"],setup:function(t,e){var a=e.emit,fe=t,ke=a,be=((0,s.KR)(!1),(0,s.KR)("")),pe=(0,s.KR)({type:"",original:0,amount:0,action:"credit",label:""}),me=function(t){if(!fe.readonly){switch(be.value="",t){case"booking":pe.value={type:"booking",original:fe.transaction.fees.booking.original,refunded:fe.transaction.fees.booking.amount,balance:fe.transaction.fees.booking.balance,amount:Math.min(fe.transaction.fees.booking.balance,fe.transaction.fees.balance),action:"credit",label:"Exchange/Rental Fee"};break;case"cpo":pe.value={type:"cpo",original:fe.transaction.fees.cpo.original,refunded:fe.transaction.fees.cpo.amount,balance:fe.transaction.fees.cpo.balance,amount:fe.transaction.fees.cpo.balance,action:"credit",label:"Flex Booking Fee"};break;case"upgrade":pe.value={type:"upgrade",original:fe.transaction.fees.upgrade.original,refunded:fe.transaction.fees.upgrade.amount,balance:fe.transaction.fees.upgrade.balance,amount:fe.transaction.fees.upgrade.balance,action:"credit",label:"Upgrade Fee"};break;case"guest":pe.value={type:"guest",original:fe.transaction.fees.guest.original,refunded:fe.transaction.fees.guest.amount,balance:fe.transaction.fees.guest.balance,amount:fe.transaction.fees.guest.balance,action:"credit",label:"Guest Fee"};break;case"late":pe.value={type:"late",original:fe.transaction.fees.late.original,refunded:fe.transaction.fees.late.amount,balance:fe.transaction.fees.late.balance,amount:fe.transaction.fees.late.balance,action:"credit",label:"Late Deposit Fee"};break;case"third_party":pe.value={type:"third_party",original:fe.transaction.fees.third_party.original,refunded:fe.transaction.fees.third_party.amount,balance:fe.transaction.fees.third_party.balance,amount:fe.transaction.fees.third_party.balance,action:"credit",label:"Third Party Deposit Fee"};break;case"extension":pe.value={type:"extension",original:fe.transaction.fees.extension.original,refunded:fe.transaction.fees.extension.amount,balance:fe.transaction.fees.extension.balance,amount:fe.transaction.fees.extension.balance,action:"credit",label:"Credit Extension Fee"};break;case"tax":pe.value={type:"tax",original:fe.transaction.fees.tax.original,refunded:fe.transaction.fees.tax.amount,balance:fe.transaction.fees.tax.balance,amount:fe.transaction.fees.tax.balance,action:"credit",label:"Tax Charged"};break;default:throw Le(),new Error("Invalid fee type")}jQuery("#transaction-fee-modal").modal("show")}},Le=function(){pe.value={type:"",original:0,refunded:0,balance:0,amount:0,action:"credit",label:""}},ge=(0,n.EW)((function(){return""!==pe.value.type&&(!(pe.value.amount<=0)&&!(pe.value.amount>pe.value.balance))})),he=function(){fe.readonly||!ge.value||fe.busy||(ke("busy",!0),be.value="",axios.post("/gpxadmin/transactions/fee/refund/",{transaction:fe.transaction.id,type:pe.value.type,amount:pe.value.amount,action:pe.value.action}).then((function(t){t.data.success?(ke("updated",t.data.transaction),jQuery("#transaction-fee-modal").modal("hide"),be.value="",Le()):(be.value=t.data.message||"An error occurred while updating the fee.",ke("busy",!1))})).catch((function(t){var e;be.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while updating the fee.",ke("busy",!1)})))};return(0,n.sV)((function(){jQuery("#transaction-fee-modal").on("hidden.bs.modal",(function(t){return Le()}))})),function(e,a){var fe,ke;return(0,n.uX)(),(0,n.CE)("div",r,[u,t.transaction.fees.refunds.other>0?((0,n.uX)(),(0,n.CE)("div",c," Please note that refunds completed before 06/27/2024 will show refunds/credits to total paid values but will not reflect refunds at the line item level. ")):(0,n.Q3)("",!0),(0,n.Lk)("table",d,[v,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[f,(0,n.Lk)("td",k,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.booking.original)),1),(0,n.Lk)("td",b,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.booking.amount)),1),(0,n.Lk)("td",p,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.booking.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[0]||(a[0]=(0,o.D$)((function(t){return me("booking")}),["prevent"])),type:"button",class:"btn btn-plain"},m)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.booking.balance)),1)])]),t.transaction.fees.cpo.original?((0,n.uX)(),(0,n.CE)("tr",L,[g,(0,n.Lk)("td",h,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.cpo.original)),1),(0,n.Lk)("td",y,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.cpo.amount)),1),(0,n.Lk)("td",x,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.cpo.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[1]||(a[1]=(0,o.D$)((function(t){return me("cpo")}),["prevent"])),type:"button",class:"btn btn-plain"},C)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.cpo.balance)),1)])])):(0,n.Q3)("",!0),t.transaction.fees.upgrade.original?((0,n.uX)(),(0,n.CE)("tr",_,[R,(0,n.Lk)("td",E,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.upgrade.original)),1),(0,n.Lk)("td",w,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.upgrade.amount)),1),(0,n.Lk)("td",X,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.upgrade.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[2]||(a[2]=(0,o.D$)((function(t){return me("upgrade")}),["prevent"])),type:"button",class:"btn btn-plain"},Q)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.upgrade.balance)),1)])])):(0,n.Q3)("",!0),t.transaction.fees.guest.original?((0,n.uX)(),(0,n.CE)("tr",G,[A,(0,n.Lk)("td",D,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.guest.original)),1),(0,n.Lk)("td",F,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.guest.amount)),1),(0,n.Lk)("td",T,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.guest.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[3]||(a[3]=(0,o.D$)((function(t){return me("guest")}),["prevent"])),type:"button",class:"btn btn-plain"},N)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.guest.balance)),1)])])):(0,n.Q3)("",!0),t.transaction.fees.late.original?((0,n.uX)(),(0,n.CE)("tr",U,[K,(0,n.Lk)("td",j,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.late.original)),1),(0,n.Lk)("td",V,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.late.amount)),1),(0,n.Lk)("td",W,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.late.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[4]||(a[4]=(0,o.D$)((function(t){return me("late")}),["prevent"])),type:"button",class:"btn btn-plain"},$)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.late.balance)),1)])])):(0,n.Q3)("",!0),t.transaction.fees.third_party.original?((0,n.uX)(),(0,n.CE)("tr",O,[B,(0,n.Lk)("td",q,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.third_party.original)),1),(0,n.Lk)("td",J,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.third_party.amount)),1),(0,n.Lk)("td",M,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.third_party.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[5]||(a[5]=(0,o.D$)((function(t){return me("third_party")}),["prevent"])),type:"button",class:"btn btn-plain"},P)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.third_party.balance)),1)])])):(0,n.Q3)("",!0),t.transaction.fees.extension.original?((0,n.uX)(),(0,n.CE)("tr",S,[I,(0,n.Lk)("td",z,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.extension.original)),1),(0,n.Lk)("td",Y,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.extension.amount)),1),(0,n.Lk)("td",H,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.extension.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[6]||(a[6]=(0,o.D$)((function(t){return me("extension")}),["prevent"])),type:"button",class:"btn btn-plain"},Z)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.extension.balance)),1)])])):(0,n.Q3)("",!0),t.transaction.fees.tax.original?((0,n.uX)(),(0,n.CE)("tr",tt,[et,(0,n.Lk)("td",at,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.tax.original)),1),(0,n.Lk)("td",nt,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.tax.amount)),1),(0,n.Lk)("td",lt,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.tax.balance>0&&t.transaction.fees.balance>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[7]||(a[7]=(0,o.D$)((function(t){return me("tax")}),["prevent"])),type:"button",class:"btn btn-plain"},st)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.tax.balance)),1)])])):(0,n.Q3)("",!0),t.transaction.fees.coupon?((0,n.uX)(),(0,n.CE)("tr",ot,[it,(0,n.Lk)("td",rt,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.coupon)),1),ut,(0,n.Lk)("td",ct,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.coupon)),1)])):(0,n.Q3)("",!0),(0,n.Lk)("tr",null,[dt,(0,n.Lk)("td",vt,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.total)),1),(0,n.Lk)("td",ft,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.refunded)),1),(0,n.Lk)("td",kt,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.balance)),1)])])]),bt,(0,n.Lk)("table",pt,[mt,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[Lt,(0,n.Lk)("td",gt,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.occoupon)),1),(0,n.Lk)("td",ht,(0,l.v_)((0,s.R1)(i.G)(-1*((null===(fe=t.transaction.refunds)||void 0===fe?void 0:fe.credits)||0))),1)]),(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,(0,l.v_)(t.transaction.is_partner?"Paid":"Credit Card")+":",1),(0,n.Lk)("td",yt,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.paid)),1),(0,n.Lk)("td",xt,(0,l.v_)((0,s.R1)(i.G)(-1*((null===(ke=t.transaction.refunds)||void 0===ke?void 0:ke.refunds)||0))),1)]),(0,n.Lk)("tr",null,[Ct,(0,n.Lk)("td",_t,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.total)),1),(0,n.Lk)("td",Rt,(0,l.v_)((0,s.R1)(i.G)(-1*t.transaction.fees.refunded)),1)]),(0,n.Lk)("tr",null,[Et,wt,(0,n.Lk)("td",Xt,(0,l.v_)((0,s.R1)(i.G)(t.transaction.fees.balance)),1)])])]),t.transaction.is_partner?((0,n.uX)(),(0,n.CE)("div",Qt," Transaction was paid by partner balance. ")):(0,n.Q3)("",!0),(0,n.Lk)("div",Gt,[(0,n.Lk)("div",At,[(0,n.Lk)("div",Dt,[(0,n.Lk)("div",Ft,[(0,n.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",disabled:t.busy},Nt,8,Tt),(0,n.Lk)("h4",Ut," Update "+(0,l.v_)(pe.value.label),1)]),(0,n.Lk)("div",Kt,[be.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"alert alert-danger",textContent:(0,l.v_)(be.value)},null,8,jt)):(0,n.Q3)("",!0),(0,n.Lk)("form",{id:"transaction-fee-form",method:"post",onSubmit:(0,o.D$)(he,["prevent"])},[(0,n.Lk)("div",Vt,[(0,n.Lk)("div",Wt,[(0,n.Lk)("div",$t,[Ot,(0,n.Lk)("div",Bt,(0,l.v_)((0,s.R1)(i.G)(pe.value.original)),1)])]),(0,n.Lk)("div",qt,[(0,n.Lk)("div",Jt,[Mt,(0,n.Lk)("div",Pt,(0,l.v_)((0,s.R1)(i.G)(pe.value.refunded)),1)])]),(0,n.Lk)("div",St,[(0,n.Lk)("div",It,[zt,(0,n.Lk)("div",Yt,(0,l.v_)((0,s.R1)(i.G)(pe.value.balance)),1)])])]),(0,n.Lk)("div",Ht,[(0,n.Lk)("div",Zt,[(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":!ge.value}])},[te,(0,n.Lk)("div",ee,[ae,(0,n.bo)((0,n.Lk)("input",{type:"number",step:".01",min:"0.00",max:Math.min(pe.value.balance,t.transaction.fees.balance),id:"transaction-fee-amount",class:"form-control","onUpdate:modelValue":a[8]||(a[8]=function(t){return pe.value.amount=t}),disabled:t.busy,required:""},null,8,ne),[[o.Jo,pe.value.amount,void 0,{number:!0}]])])],2)]),(0,n.Lk)("div",le,[t.transaction.is_admin&&!t.transaction.is_partner?((0,n.uX)(),(0,n.CE)("div",se,[oe,(0,n.bo)((0,n.Lk)("select",{id:"transaction-fee-action",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=function(t){return pe.value.action=t}),disabled:t.busy},re,8,ie),[[o.u1,pe.value.action]])])):(0,n.Q3)("",!0)])])],32)]),(0,n.Lk)("div",ue,[(0,n.Lk)("button",{form:"transaction-fee-form",type:"submit",class:"btn btn-primary",disabled:t.busy||!ge.value},[(0,n.eW)(" Submit "),(0,n.bo)((0,n.Lk)("i",de,null,512),[[o.aG,t.busy]])],8,ce),(0,n.Lk)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal",disabled:t.busy},"Close ",8,ve)])])])])])}}}},7690:(t,e,a)=>{a.d(e,{A:()=>B});var n=a(7829),l=a(9608),s=a(3102),o=a(6685),i={class:"modal fade",id:"transaction-guest-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-guest-modal-label"},r={class:"modal-dialog",role:"document"},u={class:"modal-content"},c=(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,n.Lk)("span",{"aria-hidden":"true"},"×")]),(0,n.Lk)("h4",{class:"modal-title",id:"transaction-guest-modal"}," Guest Details ")],-1),d={class:"modal-body"},v={key:0},f=[(0,n.Lk)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],k=["textContent"],b={key:1,class:"alert alert-warning"},p=["disabled"],m={class:"col-md-6"},L=(0,n.Lk)("label",{for:"transaction-guest-first_name",class:"control-label"}," First Name ",-1),g=["readonly"],h=["textContent"],y=(0,n.Lk)("label",{for:"transaction-guest-last_name",class:"control-label"},"Last Name",-1),x=["readonly"],C=["textContent"],_=(0,n.Lk)("label",{for:"transaction-guest-email",class:"control-label"},"Email",-1),R=["readonly"],E=["textContent"],w=(0,n.Lk)("label",{for:"transaction-guest-phone",class:"control-label"},"Phone",-1),X=["readonly"],Q=["textContent"],G={class:"col-md-6"},A=(0,n.Lk)("label",{for:"transaction-guest-adults",class:"control-label"},"Adults",-1),D=["readonly"],F=["textContent"],T=(0,n.Lk)("label",{for:"transaction-guest-children",class:"control-label"},"Children",-1),N=["readonly"],U=["textContent"],K=(0,n.Lk)("label",{for:"transaction-guest-owner",class:"control-label"},"Owned By",-1),j=["readonly"],V=["textContent"],W={class:"modal-footer"},$=["disabled"],O=(0,n.Lk)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"},"Close",-1);const B={__name:"TransactionGuest",props:{},emits:["updated"],setup:function(t,e){var a=e.expose,B=e.emit,q=(0,o.KR)(!1),J=(0,o.KR)(!1),M=(0,o.KR)(""),P=(0,o.KR)({}),S=(0,o.KR)({id:null,cancelled:!1,first_name:"",last_name:"",email:"",phone:"",adults:1,children:0,owner:""}),I=function(){J.value=!1,M.value="",P.value={},S.value={id:null,cancelled:!1,first_name:"",last_name:"",email:"",phone:"",adults:1,children:0,owner:""}},z=function(){jQuery("#transaction-guest-modal").modal("hide"),I()},Y=function(){q.value||!J.value||S.value.cancelled||(M.value="",P.value={},q.value=!0,axios.post("/gpxadmin/transactions/guest/update/",S.value).then((function(t){t.data.success?(z(),B("updated")):t.data.errors?(P.value=t.data.errors,M.value=t.data.message):M.value=t.data.message||"An error occurred while updating the guest details.",q.value=!1})).catch((function(t){var e,a;M.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while updating the guest details.",null!==(a=t.response)&&void 0!==a&&a.data.errors&&(P.value=t.response.data.errors),q.value=!1})))};return(0,n.sV)((function(){jQuery("#transaction-guest-modal").on("hidden.bs.modal",(function(t){return I()}))})),a({open:function(t){q.value=!0,I(),jQuery("#transaction-guest-modal").modal("show"),axios.get("/gpxadmin/transactions/guest/",{params:{transaction:t}}).then((function(t){t.data.success?(S.value=t.data.guest,J.value=!0):M.value=t.data.message||"An error occurred while retrieving the guest details.",q.value=!1})).catch((function(t){var e;M.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while retrieving the guest details.",q.value=!1}))},close:z}),function(t,e){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",r,[(0,n.Lk)("div",u,[c,(0,n.Lk)("div",d,[q.value&&!J.value?((0,n.uX)(),(0,n.CE)("div",v,f)):(0,n.Q3)("",!0),(0,n.Lk)("div",null,[M.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"alert alert-danger",textContent:(0,l.v_)(M.value)},null,8,k)):(0,n.Q3)("",!0),S.value.cancelled?((0,n.uX)(),(0,n.CE)("div",b,"This transaction has been cancelled.")):(0,n.Q3)("",!0),J.value?((0,n.uX)(),(0,n.CE)("form",{key:2,id:"transaction-guest-form",class:"details",onSubmit:(0,s.D$)(Y,["prevent"])},[(0,n.Lk)("fieldset",{class:"row",disabled:q.value},[(0,n.Lk)("div",m,[(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":P.value.first_name}])},[L,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"transaction-guest-first_name","onUpdate:modelValue":e[0]||(e[0]=function(t){return S.value.first_name=t}),autocomplete:"off",readonly:S.value.cancelled},null,8,g),[[s.Jo,S.value.first_name,void 0,{trim:!0}]]),P.value.first_name?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"help-block",textContent:(0,l.v_)(P.value.first_name[0])},null,8,h)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":P.value.last_name}])},[y,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"transaction-guest-last_name","onUpdate:modelValue":e[1]||(e[1]=function(t){return S.value.last_name=t}),autocomplete:"off",readonly:S.value.cancelled},null,8,x),[[s.Jo,S.value.last_name,void 0,{trim:!0}]]),P.value.last_name?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"help-block",textContent:(0,l.v_)(P.value.last_name[0])},null,8,C)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":P.value.email}])},[_,(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control",id:"transaction-guest-email","onUpdate:modelValue":e[2]||(e[2]=function(t){return S.value.email=t}),autocomplete:"off",readonly:S.value.cancelled},null,8,R),[[s.Jo,S.value.email,void 0,{trim:!0}]]),P.value.email?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"help-block",textContent:(0,l.v_)(P.value.email[0])},null,8,E)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":P.value.phone}])},[w,(0,n.bo)((0,n.Lk)("input",{type:"tel",class:"form-control",id:"transaction-guest-phone","onUpdate:modelValue":e[3]||(e[3]=function(t){return S.value.phone=t}),autocomplete:"off",readonly:S.value.cancelled},null,8,X),[[s.Jo,S.value.phone,void 0,{trim:!0}]]),P.value.phone?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"help-block",textContent:(0,l.v_)(P.value.phone[0])},null,8,Q)):(0,n.Q3)("",!0)],2)]),(0,n.Lk)("div",G,[(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":P.value.adults}])},[A,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"transaction-guest-adults",min:"1",step:"1","onUpdate:modelValue":e[4]||(e[4]=function(t){return S.value.adults=t}),autocomplete:"off",readonly:S.value.cancelled},null,8,D),[[s.Jo,S.value.adults,void 0,{number:!0}]]),P.value.adults?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"help-block",textContent:(0,l.v_)(P.value.adults[0])},null,8,F)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":P.value.children}])},[T,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"transaction-guest-children",min:"0",step:"1","onUpdate:modelValue":e[5]||(e[5]=function(t){return S.value.children=t}),autocomplete:"off",readonly:S.value.cancelled},null,8,N),[[s.Jo,S.value.children,void 0,{number:!0}]]),P.value.children?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"help-block",textContent:(0,l.v_)(P.value.children[0])},null,8,U)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,l.C4)(["form-group",{"has-error":P.value.owner}])},[K,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"transaction-guest-owner","onUpdate:modelValue":e[6]||(e[6]=function(t){return S.value.owner=t}),autocomplete:"off",readonly:S.value.cancelled},null,8,j),[[s.Jo,S.value.owner,void 0,{trim:!0}]]),P.value.owner?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"help-block",textContent:(0,l.v_)(P.value.owner[0])},null,8,V)):(0,n.Q3)("",!0)],2)])],8,p)],32)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",W,[(0,n.Lk)("button",{form:"transaction-guest-form",type:"submit",class:"btn btn-success",disabled:q.value||!J.value||S.value.cancelled}," Update ",8,$),O])])])])}}}},2928:(t,e,a)=>{a.d(e,{A:()=>D});var n=a(7829),l=a(9608),s=a(6685),o=a(555),i=a(7056),r=a(3999),u=a(6180),c=a(1753),d={class:"modal fade",id:"transaction-details-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-details-modal-label"},v={class:"modal-dialog modal-xl",role:"document"},f={class:"modal-content"},k=(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,n.Lk)("span",{"aria-hidden":"true"},"×")]),(0,n.Lk)("h4",{class:"modal-title",id:"transaction-details-modal-label"}," View Transaction ")],-1),b={class:"modal-body"},p={key:0},m=[(0,n.Lk)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],L=["textContent"],g={key:1,class:"details"},h={class:"row details-header"},y={class:"col-md-6"},x=["textContent"],C={class:"col-md-6"},_={style:{"text-align":"right"}},R={key:0,style:{display:"inline-block",width:"auto","margin-left":"auto"}},E=(0,n.Lk)("h4",null,"Cancelled",-1),w=(0,n.Lk)("div",null,"cancelled on --------",-1),X={class:"row"},Q={class:"col-md-4"},G={class:"col-md-4"},A={class:"col-md-4"};const D={__name:"TransactionPreview",emits:["updated"],setup:function(t,e){var a=e.expose,D=(e.emit,(0,s.KR)(!1)),F=(0,s.KR)(!1),T=(0,s.KR)(""),N=(0,s.KR)({}),U=(0,s.KR)({id:null}),K=(0,s.KR)({type:"cancel",action:"credit",amount:0}),j=function(){F.value=!1,T.value="",N.value={},U.value={id:null},K.value={type:"cancel",action:"credit",amount:0}},V=function(){D.value=!0,axios.get("/gpxadmin/transactions/details/",{params:{transaction:U.value.id}}).then((function(t){t.data.success?(U.value=t.data.transaction,F.value=!0):T.value=t.data.message||"An error occurred while retrieving the transaction details.",D.value=!1})).catch((function(t){var e;T.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while retrieving the transaction details.",D.value=!1}))};return(0,n.sV)((function(){jQuery("#transaction-details-modal").on("hidden.bs.modal",(function(t){return j()}))})),a({open:function(t){D.value=!0,j(),U.value.id=t,jQuery("#transaction-details-modal").modal("show"),V()},close:function(){jQuery("#transaction-details-modal").modal("hide"),j()}}),function(t,e){return(0,n.uX)(),(0,n.CE)("div",d,[(0,n.Lk)("div",v,[(0,n.Lk)("div",f,[k,(0,n.Lk)("div",b,[D.value&&!F.value?((0,n.uX)(),(0,n.CE)("div",p,m)):(0,n.Q3)("",!0),(0,n.Lk)("div",null,[T.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"alert alert-danger",textContent:(0,l.v_)(T.value)},null,8,L)):(0,n.Q3)("",!0),F.value?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("div",h,[(0,n.Lk)("div",y,[(0,n.Lk)("h3",null,"Transaction "+(0,l.v_)(U.value.id),1),(0,n.Lk)("div",{textContent:(0,l.v_)(U.value.date)},null,8,x)]),(0,n.Lk)("div",C,[(0,n.Lk)("div",_,[U.value.cancelled?((0,n.uX)(),(0,n.CE)("div",R,[E,(0,n.Lk)("div",null,(0,l.v_)(U.value.cancelled_date)+" by "+(0,l.v_)(U.value.cancelled_by),1),w])):(0,n.Q3)("",!0)])])]),(0,n.Lk)("div",X,[(0,n.Lk)("div",Q,[(0,n.bF)(i.A,{readonly:"",transaction:U.value},null,8,["transaction"])]),(0,n.Lk)("div",G,[U.value.is_booking?((0,n.uX)(),(0,n.Wv)(o.A,{key:0,transaction:U.value},null,8,["transaction"])):(0,n.Q3)("",!0),U.value.is_guest?((0,n.uX)(),(0,n.Wv)(c.A,{key:1,transaction:U.value},null,8,["transaction"])):(0,n.Q3)("",!0),U.value.deposit?((0,n.uX)(),(0,n.Wv)(r.A,{key:2,transaction:U.value},null,8,["transaction"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",A,[(0,n.bF)(u.A,{readonly:"",transaction:U.value},null,8,["transaction"])])])])):(0,n.Q3)("",!0)])])])])])}}}}}]);