"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[286],{7286:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Q});var r=o(7829),l=o(3102),n=o(9608),a=o(6685);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d={class:"row"},c={class:"col-xs-12 col-sm-7"},v={class:"form-group"},m={class:"form-group"},p=(0,r.Lk)("label",{class:"control-label col-md-3 col-sm-3 col-xs-12",for:"resort-unittype-name"},[(0,r.eW)("Name"),(0,r.Lk)("span",{class:"required"},"*")],-1),f={class:"col-md-6 col-sm-6 col-xs-12"},b=["textContent"],_={class:"form-group"},y=(0,r.Lk)("label",{class:"control-label col-md-3 col-sm-3 col-xs-12",for:"resort-unittype-number_of_bedrooms"},[(0,r.eW)(" Number of Bedrooms"),(0,r.Lk)("span",{class:"required"},"*")],-1),k={class:"col-md-6 col-sm-6 col-xs-12"},L=["disabled"],g=[(0,r.Lk)("option",{value:"STD"},"STD",-1),(0,r.Lk)("option",{value:"1"},"1",-1),(0,r.Lk)("option",{value:"2"},"2",-1),(0,r.Lk)("option",{value:"3"},"3",-1)],x=["textContent"],h={class:"form-group"},C=(0,r.Lk)("label",{class:"control-label col-md-3 col-sm-3 col-xs-12",for:"resort-unittype-sleeps_total"},[(0,r.eW)(" Sleeps Total"),(0,r.Lk)("span",{class:"required"},"*")],-1),O={class:"col-md-6 col-sm-6 col-xs-12"},w=["disabled"],S=["value","textContent"],j=["textContent"],E={class:"form-group"},P={class:"col-md-6 col-sm-6 col-xs-12 col-md-offset-3"},D=["disabled"],T={class:"fa fa-circle-o-notch fa-spin fa-fw"},X=["disabled"],K={class:"col-xs-5"},R=(0,r.Lk)("h3",null,"Unit Types",-1),U=["onClick","disabled"],q=(0,r.Lk)("i",{class:"fa fa-pencil"},null,-1),F=["onSubmit"],W=["value"],I=["value"],N=["disabled"],A=[(0,r.Lk)("i",{class:"fa fa-remove"},null,-1)];const Q={__name:"ResortUnitTypes",props:{resort_id:{type:Number,required:!0},unit_types:{type:Array,required:!0}},setup:function(e){var t=e,o=(0,a.KR)(!1),s=(0,a.KR)(""),Q=(0,a.KR)({}),V=(0,a.KR)(t.unit_types),$=(0,a.KR)({record_id:null,name:"",number_of_bedrooms:"STD",bedrooms_override:"",sleeps_total:2}),z=Array.from({length:11},(function(e,t){return t+2})),B=function(){$.value={record_id:null,name:"",number_of_bedrooms:"STD",bedrooms_override:"",sleeps_total:2},s.value="",Q.value={}},G=function(){if(!o.value){o.value=!0,s.value="",Q.value={};var e=$.value.record_id?"/gpxadmin/resort_unittype_edit/":"/gpxadmin/resort_unittype_add/";axios.post(e,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({resort_id:t.resort_id},$.value)).then((function(e){if(!e.data.success)throw new Error(e.data.message||"Failed to save unit type");if($.value.record_id){var t=V.value.findIndex((function(e){return e.record_id===$.value.record_id}));V.value.splice(t,1,e.data.unit_type)}else V.value.push(e.data.unit_type);B(),o.value=!1})).catch((function(e){var t,r;422===(null===(t=e.response)||void 0===t?void 0:t.status)&&(Q.value=e.response.data.errors),s.value=(null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||e.message||"Failed to save unit type",o.value=!1}))}};return function(u,i){return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",c,[(0,r.Lk)("form",{onSubmit:(0,l.D$)(G,["prevent"]),class:"form-horizontal form-label-left usage_exclude",novalidate:""},[(0,r.Lk)("div",v,[(0,r.Lk)("h4",null,(0,n.v_)($.value.record_id?"Edit":"Add")+" Unit Type",1)]),(0,r.Lk)("div",m,[p,(0,r.Lk)("div",f,[(0,r.bo)((0,r.Lk)("input",{type:"text",id:"resort-unittype-name",name:"name",required:"",class:"form-control col-md-7 col-xs-12","onUpdate:modelValue":i[0]||(i[0]=function(e){return $.value.name=e})},null,512),[[l.Jo,$.value.name]]),Q.value.name?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"form-error",textContent:(0,n.v_)(Q.value.name[0])},null,8,b)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",_,[y,(0,r.Lk)("div",k,[(0,r.bo)((0,r.Lk)("select",{name:"number_of_bedrooms",id:"resort-unittype-number_of_bedrooms",class:"form-control","onUpdate:modelValue":i[1]||(i[1]=function(e){return $.value.number_of_bedrooms=e}),disabled:o.value},g,8,L),[[l.u1,$.value.number_of_bedrooms]]),Q.value.number_of_bedrooms?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"form-error",textContent:(0,n.v_)(Q.value.number_of_bedrooms[0])},null,8,x)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",h,[C,(0,r.Lk)("div",O,[(0,r.bo)((0,r.Lk)("select",{id:"resort-unittype-sleeps_total",name:"sleeps_total",class:"form-control","onUpdate:modelValue":i[2]||(i[2]=function(e){return $.value.sleeps_total=e}),disabled:o.value},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,a.R1)(z),(function(e){return(0,r.uX)(),(0,r.CE)("option",{value:e,textContent:(0,n.v_)(e)},null,8,S)})),256))],8,w),[[l.u1,$.value.sleeps_total]]),Q.value.sleeps_total?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"form-error",textContent:(0,n.v_)(Q.value.sleeps_total[0])},null,8,j)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",E,[(0,r.Lk)("div",P,[(0,r.Lk)("button",{type:"submit",class:"btn btn-success",disabled:o.value},[(0,r.eW)((0,n.v_)($.value.record_id?"Update":"Create")+" ",1),(0,r.bo)((0,r.Lk)("i",T,null,512),[[l.aG,o.value]])],8,D),(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:B,disabled:o.value},"Cancel",8,X)])])],32)]),(0,r.Lk)("div",K,[R,(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(V.value,(function(a){return(0,r.uX)(),(0,r.CE)("li",{style:{"margin-bottom":"15px"},key:a.record_id},[(0,r.Lk)("button",{type:"button",class:"btn btn-plain",onClick:function(e){return function(e){s.value="",Q.value={},$.value={record_id:e.record_id,name:e.name,number_of_bedrooms:e.number_of_bedrooms,bedrooms_override:e.bedrooms_override,sleeps_total:e.sleeps_total}}(a)},disabled:o.value,style:{"margin-right":"5px"}},[(0,r.eW)((0,n.v_)(a.name)+" ",1),q],8,U),(0,r.Lk)("form",{class:"form-unittype-delete",onSubmit:(0,l.D$)((function(e){return function(e){o.value||(o.value=!0,s.value="",Q.value={},axios.post("/gpxadmin/resort_unittype_delete/",{resort_id:t.resort_id,record_id:e.record_id}).then((function(t){if(!t.data.success)throw new Error(t.data.message||"Failed to delete unit type");var r=V.value.findIndex((function(t){return t.record_id===e.record_id}));V.value.splice(r,1),B(),o.value=!1})).catch((function(e){var t;s.value=(null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)||e.message||"Failed to delete unit type",o.value=!1})))}(a)}),["prevent"]),style:{display:"inline"}},[(0,r.Lk)("input",{type:"hidden",name:"resort_id",value:e.resort_id},null,8,W),(0,r.Lk)("input",{type:"hidden",name:"unit_id",value:a.record_id},null,8,I),(0,r.Lk)("button",{type:"submit",class:"btn btn-plain",style:{color:"#f00"},disabled:o.value},A,8,N)],40,F)])})),128))])])])}}}}}]);