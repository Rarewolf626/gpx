"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[614],{4945:(n,t)=>{t.A=(n,t)=>{const e=n.__vccOpts||n;for(const[n,l]of t)e[n]=l;return e}},6614:(n,t,e)=>{e.r(t),e.d(t,{default:()=>E});var l=e(7829),a=e(3102),u=e(9608),o=e(6685),i=e(5256),s=e(2928),d=e(7690),c={key:0},r=[(0,l.Lk)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],k={key:1,class:"table-responsive"},v={class:"table data-table table-bordered table-condensed table-left"},f=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th"),(0,l.Lk)("th",null,"Transaction ID"),(0,l.Lk)("th",null,"Member Number"),(0,l.Lk)("th",null,"Member Name"),(0,l.Lk)("th",null,"Owned By"),(0,l.Lk)("th",null,"Guest Name"),(0,l.Lk)("th",null,"Resort Name"),(0,l.Lk)("th",null,"Week Type"),(0,l.Lk)("th",null,"Check In"),(0,l.Lk)("th",null,"Paid"),(0,l.Lk)("th",null,"Transaction Date"),(0,l.Lk)("th",null,"Cancelled")])],-1),L={style:{"white-space":"nowrap"}},b=["href"],p=[(0,l.Lk)("i",{class:"fa fa-external-link"},null,-1)],m=["onClick"],h=[(0,l.Lk)("i",{class:"fa fa-eye"},null,-1)],C=["onClick"],y=(0,l.Lk)("i",{class:"fa fa-edit",style:{"margin-right":"5px"}},null,-1),_=["textContent"],g=["onClick"],x=(0,l.Lk)("i",{class:"fa fa-eye",style:{"margin-right":"1px"}},null,-1);const E={__name:"RoomTransactions",props:{id:{type:Number,required:!0}},setup:function(n){var t=n,e=(0,o.KR)(!1),E=(0,o.KR)([]),Q=(0,o.KR)(null),X=(0,o.KR)(null),w=(0,o.KR)(null),R=function(){e.value=!1,axios.get("/gpxadmin/room_transactions/?id=".concat(t.id)).then((function(n){E.value=n.data,e.value=!0}))};return(0,l.sV)((function(){R()})),function(n,t){return(0,l.uX)(),(0,l.CE)("div",null,[e.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",c,r)),e.value&&E.value.length>0?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("table",v,[f,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.value,(function(n){return(0,l.uX)(),(0,l.CE)("tr",{key:n.id},[(0,l.Lk)("td",L,[(0,l.Lk)("a",{href:n.view,target:"_blank",class:"btn btn-default btn-plain",style:{"margin-right":"5px"}},p,8,b),(0,l.Lk)("button",{type:"button",class:"btn btn-default btn-plain",onClick:(0,a.D$)((function(t){return function(n){X.value.open(n)}(n.id)}),["prevent"])},h,8,m)]),(0,l.Lk)("td",null,(0,u.v_)(n.id),1),(0,l.Lk)("td",null,(0,u.v_)(n.user),1),(0,l.Lk)("td",null,(0,u.v_)(n.member),1),(0,l.Lk)("td",null,(0,u.v_)(n.owner),1),(0,l.Lk)("td",null,[n.is_booking?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"btn btn-default btn-plain",type:"button",onClick:(0,a.D$)((function(t){return function(n){w.value.open(n)}(n.id)}),["prevent"])},[y,(0,l.Lk)("span",{textContent:(0,u.v_)(n.guest)},null,8,_)],8,C)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",null,(0,u.v_)(n.resort),1),(0,l.Lk)("td",null,(0,u.v_)(n.week_type),1),(0,l.Lk)("td",null,(0,u.v_)(n.checkin),1),(0,l.Lk)("td",null,(0,u.v_)(n.paid),1),(0,l.Lk)("td",null,(0,u.v_)(n.date),1),(0,l.Lk)("td",null,[n.cancelled?((0,l.uX)(),(0,l.CE)("button",{key:0,type:"button",class:"btn btn-default btn-plain","data-target":"#transaction-cancelled-modal",onClick:(0,a.D$)((function(t){return function(n){Q.value.open(n)}(n.id)}),["prevent"])},[x,(0,l.eW)(" Yes ")],8,g)):(0,l.Q3)("",!0),(0,l.bo)((0,l.Lk)("span",null,"No",512),[[a.aG,!n.cancelled]])])])})),128))])])])):(0,l.Q3)("",!0),(0,l.bF)(i.A,{ref_key:"cancellation",ref:Q},null,512),(0,l.bF)(s.A,{ref_key:"details",ref:X,onUpdated:R},null,512),(0,l.bF)(d.A,{ref_key:"guest",ref:w,onUpdated:R},null,512)])}}}},5256:(n,t,e)=>{e.d(t,{A:()=>E});var l=e(7829),a=e(9608),u=e(6685),o=function(n){return(0,l.Qi)("data-v-42755f78"),n=n(),(0,l.jt)(),n},i={class:"modal fade",id:"transaction-cancelled-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-cancelled-modal-label"},s={class:"modal-dialog",role:"document"},d={class:"modal-content"},c=o((function(){return(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,l.Lk)("span",{"aria-hidden":"true"},"Ã—")]),(0,l.Lk)("h4",{class:"modal-title",id:"transaction-cancelled-modal"}," Cancellation Details ")],-1)})),r={class:"modal-body"},k={key:0},v=[o((function(){return(0,l.Lk)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)}))],f={key:1},L=["textContent"],b={key:1,class:"details"},p=o((function(){return(0,l.Lk)("div",null,[(0,l.Lk)("strong",null,"Cancelled By")],-1)})),m=["textContent"],h=o((function(){return(0,l.Lk)("div",null,[(0,l.Lk)("strong",null,"Date")],-1)})),C=["textContent"],y=o((function(){return(0,l.Lk)("div",null,[(0,l.Lk)("strong",null,"Refunded")],-1)})),_=["textContent"],g=o((function(){return(0,l.Lk)("div",{class:"modal-footer"},[(0,l.Lk)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"},"Close")],-1)}));const x={__name:"TransactionCancellationDetails",setup:function(n,t){var e=t.expose,o=(0,u.KR)(!1),x=(0,u.KR)(""),E=(0,u.KR)(null),Q=function(){x.value="",E.value=null};return(0,l.sV)((function(){jQuery("#transaction-cancelled-modal").on("hidden.bs.modal",(function(n){return Q()}))})),e({open:function(n){o.value=!0,Q(),jQuery("#transaction-cancelled-modal").modal("show"),axios.get("/gpxadmin/transactions/cancellation/",{params:{transaction:n}}).then((function(n){n.data.success?E.value=n.data.details:x.value=n.data.message||"An error occurred while retrieving the cancellation details.",o.value=!1})).catch((function(n){var t;x.value=(null===(t=n.response)||void 0===t?void 0:t.data.message)||"An error occurred while retrieving the cancellation details.",o.value=!1}))},close:function(){jQuery("#transaction-cancelled-modal").modal("hide"),Q()}}),function(n,t){return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("div",s,[(0,l.Lk)("div",d,[c,(0,l.Lk)("div",r,[o.value?((0,l.uX)(),(0,l.CE)("div",k,v)):(0,l.Q3)("",!0),o.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",f,[x.value?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"alert alert-danger",textContent:(0,a.v_)(x.value)},null,8,L)):(0,l.Q3)("",!0),E.value?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.Lk)("div",null,[p,(0,l.Lk)("div",{textContent:(0,a.v_)(E.value.name)},null,8,m)]),(0,l.Lk)("div",null,[h,(0,l.Lk)("div",{textContent:(0,a.v_)(E.value.date)},null,8,C)]),(0,l.Lk)("div",null,[y,(0,l.Lk)("div",{textContent:(0,a.v_)(E.value.amount)},null,8,_)])])):(0,l.Q3)("",!0)]))]),g])])])}}};const E=(0,e(4945).A)(x,[["__scopeId","data-v-42755f78"]])}}]);