"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[665],{9665:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Y});var r=o(9026),l=o(467),n=o(7401),a=o(7885);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function u(e,t,o){var r;return r=function(e,t){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==s(r)?r:String(r))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d={class:"row"},c={class:"col-xs-12 col-sm-7"},m={class:"form-group"},v={class:"form-group"},p=(0,r._)("label",{class:"control-label col-md-3 col-sm-3 col-xs-12",for:"resort-unittype-name"},[(0,r.Uk)("Name"),(0,r._)("span",{class:"required"},"*")],-1),_={class:"col-md-6 col-sm-6 col-xs-12"},f=["textContent"],b={class:"form-group"},y=(0,r._)("label",{class:"control-label col-md-3 col-sm-3 col-xs-12",for:"resort-unittype-number_of_bedrooms"},[(0,r.Uk)(" Number of Bedrooms"),(0,r._)("span",{class:"required"},"*")],-1),g={class:"col-md-6 col-sm-6 col-xs-12"},w=["disabled"],x=[(0,r._)("option",{value:"STD"},"STD",-1),(0,r._)("option",{value:"1"},"1",-1),(0,r._)("option",{value:"2"},"2",-1),(0,r._)("option",{value:"3"},"3",-1)],h=["textContent"],k={class:"form-group"},S=(0,r._)("label",{class:"control-label col-md-3 col-sm-3 col-xs-12",for:"resort-unittype-sleeps_total"},[(0,r.Uk)(" Sleeps Total"),(0,r._)("span",{class:"required"},"*")],-1),O={class:"col-md-6 col-sm-6 col-xs-12"},D=["disabled"],C=["value","textContent"],j=["textContent"],U={class:"form-group"},P={class:"col-md-6 col-sm-6 col-xs-12 col-md-offset-3"},q=["disabled"],T={class:"fa fa-circle-o-notch fa-spin fa-fw"},z=["disabled"],H={class:"col-xs-5"},E=(0,r._)("h3",null,"Unit Types",-1),F=["onClick","disabled"],M=(0,r._)("i",{class:"fa fa-pencil"},null,-1),N=["onSubmit"],A=["value"],V=["value"],I=["disabled"],K=[(0,r._)("i",{class:"fa fa-remove"},null,-1)];const Y={__name:"ResortUnitTypes",props:{resort_id:{type:Number,required:!0},unit_types:{type:Array,required:!0}},setup:function(e){var t=e,o=(0,a.iH)(!1),s=(0,a.iH)(""),Y=(0,a.iH)({}),B=(0,a.iH)(t.unit_types),R=(0,a.iH)({record_id:null,name:"",number_of_bedrooms:"STD",bedrooms_override:"",sleeps_total:2}),G=Array.from({length:11},(function(e,t){return t+2})),J=function(){R.value={record_id:null,name:"",number_of_bedrooms:"STD",bedrooms_override:"",sleeps_total:2},s.value="",Y.value={}},L=function(){if(!o.value){o.value=!0,s.value="",Y.value={};var e=R.value.record_id?"/gpxadmin/resort_unittype_edit/":"/gpxadmin/resort_unittype_add/";axios.post(e,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){u(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({resort_id:t.resort_id},R.value)).then((function(e){if(!e.data.success)throw new Error(e.data.message||"Failed to save unit type");if(R.value.record_id){var t=B.value.findIndex((function(e){return e.record_id===R.value.record_id}));B.value.splice(t,1,e.data.unit_type)}else B.value.push(e.data.unit_type);J(),o.value=!1})).catch((function(e){var t,r;422===(null===(t=e.response)||void 0===t?void 0:t.status)&&(Y.value=e.response.data.errors),s.value=(null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||e.message||"Failed to save unit type",o.value=!1}))}};return function(i,u){return(0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",c,[(0,r._)("form",{onSubmit:(0,l.iM)(L,["prevent"]),class:"form-horizontal form-label-left usage_exclude",novalidate:""},[(0,r._)("div",m,[(0,r._)("h4",null,(0,n.zw)(R.value.record_id?"Edit":"Add")+" Unit Type",1)]),(0,r._)("div",v,[p,(0,r._)("div",_,[(0,r.wy)((0,r._)("input",{type:"text",id:"resort-unittype-name",name:"name",required:"",class:"form-control col-md-7 col-xs-12","onUpdate:modelValue":u[0]||(u[0]=function(e){return R.value.name=e})},null,512),[[l.nr,R.value.name]]),Y.value.name?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"form-error",textContent:(0,n.zw)(Y.value.name[0])},null,8,f)):(0,r.kq)("",!0)])]),(0,r._)("div",b,[y,(0,r._)("div",g,[(0,r.wy)((0,r._)("select",{name:"number_of_bedrooms",id:"resort-unittype-number_of_bedrooms",class:"form-control","onUpdate:modelValue":u[1]||(u[1]=function(e){return R.value.number_of_bedrooms=e}),disabled:o.value},x,8,w),[[l.bM,R.value.number_of_bedrooms]]),Y.value.number_of_bedrooms?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"form-error",textContent:(0,n.zw)(Y.value.number_of_bedrooms[0])},null,8,h)):(0,r.kq)("",!0)])]),(0,r._)("div",k,[S,(0,r._)("div",O,[(0,r.wy)((0,r._)("select",{id:"resort-unittype-sleeps_total",name:"sleeps_total",class:"form-control","onUpdate:modelValue":u[2]||(u[2]=function(e){return R.value.sleeps_total=e}),disabled:o.value},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(G),(function(e){return(0,r.wg)(),(0,r.iD)("option",{value:e,textContent:(0,n.zw)(e)},null,8,C)})),256))],8,D),[[l.bM,R.value.sleeps_total]]),Y.value.sleeps_total?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"form-error",textContent:(0,n.zw)(Y.value.sleeps_total[0])},null,8,j)):(0,r.kq)("",!0)])]),(0,r._)("div",U,[(0,r._)("div",P,[(0,r._)("button",{type:"submit",class:"btn btn-success",disabled:o.value},[(0,r.Uk)((0,n.zw)(R.value.record_id?"Update":"Create")+" ",1),(0,r.wy)((0,r._)("i",T,null,512),[[l.F8,o.value]])],8,q),(0,r._)("button",{type:"button",class:"btn btn-secondary",onClick:J,disabled:o.value},"Cancel",8,z)])])],32)]),(0,r._)("div",H,[E,(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(B.value,(function(a){return(0,r.wg)(),(0,r.iD)("li",{style:{"margin-bottom":"15px"},key:a.record_id},[(0,r._)("button",{type:"button",class:"btn btn-plain",onClick:function(e){return function(e){s.value="",Y.value={},R.value={record_id:e.record_id,name:e.name,number_of_bedrooms:e.number_of_bedrooms,bedrooms_override:e.bedrooms_override,sleeps_total:e.sleeps_total}}(a)},disabled:o.value,style:{"margin-right":"5px"}},[(0,r.Uk)((0,n.zw)(a.name)+" ",1),M],8,F),(0,r._)("form",{class:"form-unittype-delete",onSubmit:(0,l.iM)((function(e){return function(e){o.value||(o.value=!0,s.value="",Y.value={},axios.post("/gpxadmin/resort_unittype_delete/",{resort_id:t.resort_id,record_id:e.record_id}).then((function(t){if(!t.data.success)throw new Error(t.data.message||"Failed to delete unit type");var r=B.value.findIndex((function(t){return t.record_id===e.record_id}));B.value.splice(r,1),J(),o.value=!1})).catch((function(e){var t;s.value=(null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)||e.message||"Failed to delete unit type",o.value=!1})))}(a)}),["prevent"]),style:{display:"inline"}},[(0,r._)("input",{type:"hidden",name:"resort_id",value:e.resort_id},null,8,A),(0,r._)("input",{type:"hidden",name:"unit_id",value:a.record_id},null,8,V),(0,r._)("button",{type:"submit",class:"btn btn-plain",style:{color:"#f00"},disabled:o.value},K,8,I)],40,N)])})),128))])])])}}}}}]);