"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[597],{2561:(t,e,a)=>{a.d(e,{A:()=>n,N:()=>l});var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(""===t||null===t||isNaN(Number(t))){if(!e)return null;t=0}return Number(t).toLocaleString(void 0,{style:"currency",currency:"USD"})},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""===t||null===t||isNaN(Number(t))?0:Number(Math.round(t+"e"+e)+"e-"+e)}},904:(t,e,a)=>{a.d(e,{Z:()=>v});var n=a(9026),l=a(7401),s={class:"well"},o=(0,n._)("h3",null,"Deposit",-1),i={class:"table table-details w-auto"},r=(0,n._)("th",null,"Ref No:",-1),c=["textContent"],u=(0,n._)("th",null,"Resort Name:",-1),d=["textContent"],f=(0,n._)("th",null,"Deposit Year:",-1),_=["textContent"],p=(0,n._)("th",null,"Unit:",-1),b=["textContent"];const v={__name:"TransactionDetailsDeposit",props:{transaction:{type:Object,required:!0}},setup:function(t){return function(e,a){return(0,n.wg)(),(0,n.iD)("div",s,[o,(0,n._)("table",i,[(0,n._)("tbody",null,[(0,n._)("tr",null,[r,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.deposit.id)},null,8,c)]),(0,n._)("tr",null,[u,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.deposit.resort)},null,8,d)]),(0,n._)("tr",null,[f,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.deposit.year)},null,8,_)]),(0,n._)("tr",null,[p,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.deposit.unit)},null,8,b)])])])])}}}},8654:(t,e,a)=>{a.d(e,{Z:()=>q});var n=a(9026),l=a(7401),s=a(467),o=a(7885),i=a(7866),r={class:"well"},c=["textContent"],u={class:"table table-details w-auto"},d=(0,n._)("th",null,"Member Number:",-1),f=["textContent"],_=(0,n._)("th",null,"Member Name:",-1),p=["textContent"],b={key:0},v=(0,n._)("th",null,"Guest Name:",-1),g=(0,n._)("i",{class:"fa fa-edit",style:{"margin-right":"5px"}},null,-1),m=["textContent"],h=["textContent"],y={key:1},w=(0,n._)("th",null,"Adults:",-1),x=["textContent"],k={key:2},C=(0,n._)("th",null,"Children:",-1),z=["textContent"],U={key:3},D=(0,n._)("th",null,"Special Request:",-1),A=["textContent"];const q={__name:"TransactionDetailsGuest",props:{transaction:{type:Object,required:!0},readonly:{type:Boolean,default:!1},busy:{type:Boolean,default:!1}},emits:["updated","busy"],setup:function(t,e){var a=e.emit,q=t,S=a,F=(0,o.iH)(null),T=function(){F.value.open(q.transaction.id)},M=function(){S("updated")};return function(e,a){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("h3",{textContent:(0,l.zw)(t.transaction.has_guest?"Guest Info":"Member Info")},null,8,c),(0,n._)("table",u,[(0,n._)("tbody",null,[(0,n._)("tr",null,[d,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.user_id)},null,8,f)]),(0,n._)("tr",null,[_,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.member)},null,8,p)]),t.transaction.has_guest?((0,n.wg)(),(0,n.iD)("tr",b,[v,(0,n._)("td",null,[!t.readonly&&t.transaction.is_booking?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-default btn-plain",type:"button",onClick:(0,s.iM)(T,["prevent"])},[g,(0,n._)("span",{textContent:(0,l.zw)(t.transaction.guest)},null,8,m)])):((0,n.wg)(),(0,n.iD)("span",{key:1,textContent:(0,l.zw)(t.transaction.guest)},null,8,h))])])):(0,n.kq)("",!0),t.transaction.has_guest?((0,n.wg)(),(0,n.iD)("tr",y,[w,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.adults)},null,8,x)])):(0,n.kq)("",!0),t.transaction.has_guest?((0,n.wg)(),(0,n.iD)("tr",k,[C,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.children)},null,8,z)])):(0,n.kq)("",!0),t.transaction.special_request?((0,n.wg)(),(0,n.iD)("tr",U,[D,(0,n._)("td",null,[(0,n._)("div",{textContent:(0,l.zw)(t.transaction.special_request),style:{width:"100%","white-space":"pre-wrap",overflow:"auto"}},null,8,A)])])):(0,n.kq)("",!0)])]),t.readonly?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(i.Z,{key:0,ref_key:"guest",ref:F,onUpdated:M},null,512))])}}}},1037:(t,e,a)=>{a.d(e,{Z:()=>u});var n=a(9026),l={key:0,class:"well"},s=(0,n._)("h3",null,"Original Transaction",-1),o=(0,n._)("div",{style:{"margin-bottom":"10px"}}," This is a guest fee charged for modifying the guest for another transaction. ",-1),i={key:0},r=["href"],c={key:1,class:"alert alert-error"};const u={__name:"TransactionDetailsGuestModification",props:{transaction:{type:Object,required:!0}},setup:function(t){return function(e,a){return t.transaction.is_guest?((0,n.wg)(),(0,n.iD)("div",l,[s,o,t.transaction.parent_transaction?((0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("a",{class:"btn btn-info",href:t.transaction.parent_transaction_url},"View Original Transaction",8,r)])):((0,n.wg)(),(0,n.iD)("div",c," Original Booking Information not available. Transaction prior to checkup upgrade. "))])):(0,n.kq)("",!0)}}}},664:(t,e,a)=>{a.d(e,{Z:()=>m});var n=a(9026),l=a(7401),s={class:"well"},o=(0,n._)("h3",null,"Resort / Room Info",-1),i={class:"table table-details w-auto"},r=(0,n._)("th",null,"Ref No:",-1),c=["textContent"],u=(0,n._)("th",null,"Resort Name:",-1),d=["textContent"],f=(0,n._)("th",null,"Size:",-1),_=["textContent"],p=(0,n._)("th",null,"Check In:",-1),b=["textContent"],v=(0,n._)("th",null,"Nights:",-1),g=["textContent"];const m={__name:"TransactionDetailsRoom",props:{transaction:{type:Object,required:!0}},setup:function(t){return function(e,a){return(0,n.wg)(),(0,n.iD)("div",s,[o,(0,n._)("table",i,[(0,n._)("tbody",null,[(0,n._)("tr",null,[r,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.week)},null,8,c)]),(0,n._)("tr",null,[u,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.resort)},null,8,d)]),(0,n._)("tr",null,[f,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.size)},null,8,_)]),(0,n._)("tr",null,[p,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.checkin)},null,8,b)]),(0,n._)("tr",null,[v,(0,n._)("td",{textContent:(0,l.zw)(t.transaction.nights)},null,8,g)])])])])}}}},9937:(t,e,a)=>{a.d(e,{Z:()=>_e});var n=a(9026),l=a(7401),s=a(7885),o=a(467),i=a(2561),r={class:"well"},c=(0,n._)("h3",null,"Fees",-1),u={key:0,class:"alert alert-danger"},d={class:"table table-details w-auto"},f=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Fee"),(0,n._)("th",{class:"text-right"},"Amount"),(0,n._)("th",{class:"text-right"},"Refunded"),(0,n._)("th",{class:"text-right"},"Balance")])],-1),_=(0,n._)("th",null," Exchange/Rental Fee: ",-1),p={class:"text-right"},b={class:"text-right"},v={class:"text-right"},g=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],m={key:0},h=(0,n._)("th",null,"Flex Booking Fee:",-1),y={class:"text-right"},w={class:"text-right"},x={class:"text-right"},k=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],C={key:1},z=(0,n._)("th",null,"Upgrade Fee:",-1),U={class:"text-right"},D={class:"text-right"},A={class:"text-right"},q=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],S={key:2},F=(0,n._)("th",null,"Guest Fee:",-1),T={class:"text-right"},M={class:"text-right"},N={class:"text-right"},j=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],R={key:3},H=(0,n._)("th",null,"Late Deposit Fee:",-1),Z={class:"text-right"},O={class:"text-right"},V={class:"text-right"},B=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],Q={key:4},G=(0,n._)("th",null,"Third Party Deposit Fee:",-1),P={class:"text-right"},E={class:"text-right"},I={class:"text-right"},L=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],W={key:5},Y=(0,n._)("th",null,"Credit Extension Fee:",-1),$={class:"text-right"},J={class:"text-right"},K={class:"text-right"},X=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],tt={key:6},et=(0,n._)("th",null,"Tax Charged:",-1),at={class:"text-right"},nt={class:"text-right"},lt={class:"text-right"},st=[(0,n._)("i",{class:"fa fa-pencil"},null,-1)],ot={key:7},it=(0,n._)("th",null,"Coupon:",-1),rt={class:"text-right"},ct=(0,n._)("td",{class:"text-right"}," ---- ",-1),ut={class:"text-right"},dt=(0,n._)("th",null,"Total:",-1),ft={class:"text-right"},_t={class:"text-right"},pt={class:"text-right"},bt=(0,n._)("h4",null,"Paid",-1),vt={class:"table table-details w-auto"},gt=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th"),(0,n._)("th",{class:"text-right"},"Paid"),(0,n._)("th",{class:"text-right"},"Refunded")])],-1),mt=(0,n._)("th",null,"Monetary Credit:",-1),ht={class:"text-right"},yt={class:"text-right"},wt={class:"text-right"},xt={class:"text-right"},kt=(0,n._)("th",null,"Total:",-1),Ct={class:"text-right"},zt={class:"text-right"},Ut=(0,n._)("th",null,"Balance",-1),Dt=(0,n._)("td",null,null,-1),At={class:"text-right"},qt={key:1,class:"alert alert-info"},St={class:"modal fade",id:"transaction-fee-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-fee-modal-label","data-backdrop":"static"},Ft={class:"modal-dialog",role:"document"},Tt={class:"modal-content"},Mt={class:"modal-header"},Nt=["disabled"],jt=[(0,n._)("span",{"aria-hidden":"true"},"×",-1)],Rt={class:"modal-title",id:"transaction-fee-modal-label"},Ht={class:"modal-body"},Zt=["textContent"],Ot={class:"form-row"},Vt={class:"col-sm-4"},Bt={class:"form-group"},Qt=(0,n._)("label",{for:"transaction-fee-original",class:"control-label"},"Original Fee",-1),Gt={id:"transaction-fee-original",class:"form-control-static"},Pt={class:"col-sm-4"},Et={class:"form-group"},It=(0,n._)("label",{for:"transaction-fee-refunded",class:"control-label"},"Already Refunded",-1),Lt={id:"transaction-fee-refunded",class:"form-control-static"},Wt={class:"col-sm-4"},Yt={class:"form-group"},$t=(0,n._)("label",{for:"transaction-fee-refunded",class:"control-label"},"Remaining Fee",-1),Jt={id:"transaction-fee-refunded",class:"form-control-static"},Kt={class:"form-row"},Xt={class:"col-sm-6"},te=(0,n._)("label",{for:"transaction-fee-amount",class:"control-label"},"Refund Amount",-1),ee={class:"input-group"},ae=(0,n._)("span",{class:"input-group-addon"},"$",-1),ne=["max","disabled"],le={class:"col-sm-6"},se={key:0,class:"form-group"},oe=(0,n._)("label",{for:"transaction-fee-action",class:"control-label"},"Action",-1),ie=["disabled"],re=[(0,n._)("option",{value:"credit"},"Credit Owner",-1),(0,n._)("option",{value:"refund"},"Refund Credit Card",-1)],ce={class:"modal-footer"},ue=["disabled"],de={class:"fa fa-spinner fa-spin",style:{"margin-left":"2px"}},fe=["disabled"];const _e={__name:"TransactionFees",props:{transaction:{type:Object,required:!0},readonly:{type:Boolean,default:!0},busy:{type:Boolean,default:!1}},emits:["updated","busy"],setup:function(t,e){var a=e.emit,_e=t,pe=a,be=((0,s.iH)(!1),(0,s.iH)("")),ve=(0,s.iH)({type:"",original:0,amount:0,action:"credit",label:""}),ge=function(t){if(!_e.readonly){switch(be.value="",t){case"booking":ve.value={type:"booking",original:_e.transaction.fees.booking.original,refunded:_e.transaction.fees.booking.amount,balance:_e.transaction.fees.booking.balance,amount:Math.min(_e.transaction.fees.booking.balance,_e.transaction.fees.balance),action:"credit",label:"Exchange/Rental Fee"};break;case"cpo":ve.value={type:"cpo",original:_e.transaction.fees.cpo.original,refunded:_e.transaction.fees.cpo.amount,balance:_e.transaction.fees.cpo.balance,amount:_e.transaction.fees.cpo.balance,action:"credit",label:"Flex Booking Fee"};break;case"upgrade":ve.value={type:"upgrade",original:_e.transaction.fees.upgrade.original,refunded:_e.transaction.fees.upgrade.amount,balance:_e.transaction.fees.upgrade.balance,amount:_e.transaction.fees.upgrade.balance,action:"credit",label:"Upgrade Fee"};break;case"guest":ve.value={type:"guest",original:_e.transaction.fees.guest.original,refunded:_e.transaction.fees.guest.amount,balance:_e.transaction.fees.guest.balance,amount:_e.transaction.fees.guest.balance,action:"credit",label:"Guest Fee"};break;case"late":ve.value={type:"late",original:_e.transaction.fees.late.original,refunded:_e.transaction.fees.late.amount,balance:_e.transaction.fees.late.balance,amount:_e.transaction.fees.late.balance,action:"credit",label:"Late Deposit Fee"};break;case"third_party":ve.value={type:"third_party",original:_e.transaction.fees.third_party.original,refunded:_e.transaction.fees.third_party.amount,balance:_e.transaction.fees.third_party.balance,amount:_e.transaction.fees.third_party.balance,action:"credit",label:"Third Party Deposit Fee"};break;case"extension":ve.value={type:"extension",original:_e.transaction.fees.extension.original,refunded:_e.transaction.fees.extension.amount,balance:_e.transaction.fees.extension.balance,amount:_e.transaction.fees.extension.balance,action:"credit",label:"Credit Extension Fee"};break;case"tax":ve.value={type:"tax",original:_e.transaction.fees.tax.original,refunded:_e.transaction.fees.tax.amount,balance:_e.transaction.fees.tax.balance,amount:_e.transaction.fees.tax.balance,action:"credit",label:"Tax Charged"};break;default:throw me(),new Error("Invalid fee type")}jQuery("#transaction-fee-modal").modal("show")}},me=function(){ve.value={type:"",original:0,refunded:0,balance:0,amount:0,action:"credit",label:""}},he=(0,n.Fl)((function(){return""!==ve.value.type&&(!(ve.value.amount<=0)&&!(ve.value.amount>ve.value.balance))})),ye=function(){_e.readonly||!he.value||_e.busy||(pe("busy",!0),be.value="",axios.post("/gpxadmin/transactions/fee/refund/",{transaction:_e.transaction.id,type:ve.value.type,amount:ve.value.amount,action:ve.value.action}).then((function(t){t.data.success?(pe("updated",t.data.transaction),jQuery("#transaction-fee-modal").modal("hide"),be.value="",me()):(be.value=t.data.message||"An error occurred while updating the fee.",pe("busy",!1))})).catch((function(t){var e;be.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while updating the fee.",pe("busy",!1)})))};return(0,n.bv)((function(){jQuery("#transaction-fee-modal").on("hidden.bs.modal",(function(t){return me()}))})),function(e,a){var _e,pe;return(0,n.wg)(),(0,n.iD)("div",r,[c,t.transaction.fees.refunds.other>0?((0,n.wg)(),(0,n.iD)("div",u," Please note that refunds completed before 06/27/2024 will show refunds/credits to total paid values but will not reflect refunds at the line item level. ")):(0,n.kq)("",!0),(0,n._)("table",d,[f,(0,n._)("tbody",null,[(0,n._)("tr",null,[_,(0,n._)("td",p,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.booking.original)),1),(0,n._)("td",b,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.booking.amount)),1),(0,n._)("td",v,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.booking.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[0]||(a[0]=(0,o.iM)((function(t){return ge("booking")}),["prevent"])),type:"button",class:"btn btn-plain"},g)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.booking.balance)),1)])]),t.transaction.fees.cpo.original?((0,n.wg)(),(0,n.iD)("tr",m,[h,(0,n._)("td",y,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.cpo.original)),1),(0,n._)("td",w,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.cpo.amount)),1),(0,n._)("td",x,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.cpo.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[1]||(a[1]=(0,o.iM)((function(t){return ge("cpo")}),["prevent"])),type:"button",class:"btn btn-plain"},k)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.cpo.balance)),1)])])):(0,n.kq)("",!0),t.transaction.fees.upgrade.original?((0,n.wg)(),(0,n.iD)("tr",C,[z,(0,n._)("td",U,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.upgrade.original)),1),(0,n._)("td",D,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.upgrade.amount)),1),(0,n._)("td",A,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.upgrade.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[2]||(a[2]=(0,o.iM)((function(t){return ge("upgrade")}),["prevent"])),type:"button",class:"btn btn-plain"},q)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.upgrade.balance)),1)])])):(0,n.kq)("",!0),t.transaction.fees.guest.original?((0,n.wg)(),(0,n.iD)("tr",S,[F,(0,n._)("td",T,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.guest.original)),1),(0,n._)("td",M,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.guest.amount)),1),(0,n._)("td",N,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.guest.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[3]||(a[3]=(0,o.iM)((function(t){return ge("guest")}),["prevent"])),type:"button",class:"btn btn-plain"},j)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.guest.balance)),1)])])):(0,n.kq)("",!0),t.transaction.fees.late.original?((0,n.wg)(),(0,n.iD)("tr",R,[H,(0,n._)("td",Z,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.late.original)),1),(0,n._)("td",O,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.late.amount)),1),(0,n._)("td",V,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.late.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[4]||(a[4]=(0,o.iM)((function(t){return ge("late")}),["prevent"])),type:"button",class:"btn btn-plain"},B)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.late.balance)),1)])])):(0,n.kq)("",!0),t.transaction.fees.third_party.original?((0,n.wg)(),(0,n.iD)("tr",Q,[G,(0,n._)("td",P,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.third_party.original)),1),(0,n._)("td",E,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.third_party.amount)),1),(0,n._)("td",I,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.third_party.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[5]||(a[5]=(0,o.iM)((function(t){return ge("third_party")}),["prevent"])),type:"button",class:"btn btn-plain"},L)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.third_party.balance)),1)])])):(0,n.kq)("",!0),t.transaction.fees.extension.original?((0,n.wg)(),(0,n.iD)("tr",W,[Y,(0,n._)("td",$,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.extension.original)),1),(0,n._)("td",J,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.extension.amount)),1),(0,n._)("td",K,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.extension.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[6]||(a[6]=(0,o.iM)((function(t){return ge("extension")}),["prevent"])),type:"button",class:"btn btn-plain"},X)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.extension.balance)),1)])])):(0,n.kq)("",!0),t.transaction.fees.tax.original?((0,n.wg)(),(0,n.iD)("tr",tt,[et,(0,n._)("td",at,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.tax.original)),1),(0,n._)("td",nt,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.tax.amount)),1),(0,n._)("td",lt,[!t.readonly&&t.transaction.is_admin&&t.transaction.fees.tax.balance>0&&t.transaction.fees.balance>0?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[7]||(a[7]=(0,o.iM)((function(t){return ge("tax")}),["prevent"])),type:"button",class:"btn btn-plain"},st)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.tax.balance)),1)])])):(0,n.kq)("",!0),t.transaction.fees.coupon?((0,n.wg)(),(0,n.iD)("tr",ot,[it,(0,n._)("td",rt,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.coupon)),1),ct,(0,n._)("td",ut,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.coupon)),1)])):(0,n.kq)("",!0),(0,n._)("tr",null,[dt,(0,n._)("td",ft,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.total)),1),(0,n._)("td",_t,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.refunded)),1),(0,n._)("td",pt,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.balance)),1)])])]),bt,(0,n._)("table",vt,[gt,(0,n._)("tbody",null,[(0,n._)("tr",null,[mt,(0,n._)("td",ht,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.occoupon)),1),(0,n._)("td",yt,(0,l.zw)((0,s.SU)(i.A)(-1*((null===(_e=t.transaction.refunds)||void 0===_e?void 0:_e.credits)||0))),1)]),(0,n._)("tr",null,[(0,n._)("th",null,(0,l.zw)(t.transaction.is_partner?"Paid":"Credit Card")+":",1),(0,n._)("td",wt,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.paid)),1),(0,n._)("td",xt,(0,l.zw)((0,s.SU)(i.A)(-1*((null===(pe=t.transaction.refunds)||void 0===pe?void 0:pe.refunds)||0))),1)]),(0,n._)("tr",null,[kt,(0,n._)("td",Ct,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.total)),1),(0,n._)("td",zt,(0,l.zw)((0,s.SU)(i.A)(-1*t.transaction.fees.refunded)),1)]),(0,n._)("tr",null,[Ut,Dt,(0,n._)("td",At,(0,l.zw)((0,s.SU)(i.A)(t.transaction.fees.balance)),1)])])]),t.transaction.is_partner?((0,n.wg)(),(0,n.iD)("div",qt," Transaction was paid by partner balance. ")):(0,n.kq)("",!0),(0,n._)("div",St,[(0,n._)("div",Ft,[(0,n._)("div",Tt,[(0,n._)("div",Mt,[(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",disabled:t.busy},jt,8,Nt),(0,n._)("h4",Rt," Update "+(0,l.zw)(ve.value.label),1)]),(0,n._)("div",Ht,[be.value?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"alert alert-danger",textContent:(0,l.zw)(be.value)},null,8,Zt)):(0,n.kq)("",!0),(0,n._)("form",{id:"transaction-fee-form",method:"post",onSubmit:(0,o.iM)(ye,["prevent"])},[(0,n._)("div",Ot,[(0,n._)("div",Vt,[(0,n._)("div",Bt,[Qt,(0,n._)("div",Gt,(0,l.zw)((0,s.SU)(i.A)(ve.value.original)),1)])]),(0,n._)("div",Pt,[(0,n._)("div",Et,[It,(0,n._)("div",Lt,(0,l.zw)((0,s.SU)(i.A)(ve.value.refunded)),1)])]),(0,n._)("div",Wt,[(0,n._)("div",Yt,[$t,(0,n._)("div",Jt,(0,l.zw)((0,s.SU)(i.A)(ve.value.balance)),1)])])]),(0,n._)("div",Kt,[(0,n._)("div",Xt,[(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":!he.value}])},[te,(0,n._)("div",ee,[ae,(0,n.wy)((0,n._)("input",{type:"number",step:".01",min:"0.00",max:Math.min(ve.value.balance,t.transaction.fees.balance),id:"transaction-fee-amount",class:"form-control","onUpdate:modelValue":a[8]||(a[8]=function(t){return ve.value.amount=t}),disabled:t.busy,required:""},null,8,ne),[[o.nr,ve.value.amount,void 0,{number:!0}]])])],2)]),(0,n._)("div",le,[t.transaction.is_admin&&!t.transaction.is_partner?((0,n.wg)(),(0,n.iD)("div",se,[oe,(0,n.wy)((0,n._)("select",{id:"transaction-fee-action",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=function(t){return ve.value.action=t}),disabled:t.busy},re,8,ie),[[o.bM,ve.value.action]])])):(0,n.kq)("",!0)])])],32)]),(0,n._)("div",ce,[(0,n._)("button",{form:"transaction-fee-form",type:"submit",class:"btn btn-primary",disabled:t.busy||!he.value},[(0,n.Uk)(" Submit "),(0,n.wy)((0,n._)("i",de,null,512),[[o.F8,t.busy]])],8,ue),(0,n._)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal",disabled:t.busy},"Close ",8,fe)])])])])])}}}},7866:(t,e,a)=>{a.d(e,{Z:()=>G});var n=a(9026),l=a(7401),s=a(467),o=a(7885),i={class:"modal fade",id:"transaction-guest-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-guest-modal-label"},r={class:"modal-dialog",role:"document"},c={class:"modal-content"},u=(0,n._)("div",{class:"modal-header"},[(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,n._)("span",{"aria-hidden":"true"},"×")]),(0,n._)("h4",{class:"modal-title",id:"transaction-guest-modal"}," Guest Details ")],-1),d={class:"modal-body"},f={key:0},_=[(0,n._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],p=["textContent"],b={key:1,class:"alert alert-warning"},v=["disabled"],g={class:"col-md-6"},m=(0,n._)("label",{for:"transaction-guest-first_name",class:"control-label"}," First Name ",-1),h=["readonly"],y=["textContent"],w=(0,n._)("label",{for:"transaction-guest-last_name",class:"control-label"},"Last Name",-1),x=["readonly"],k=["textContent"],C=(0,n._)("label",{for:"transaction-guest-email",class:"control-label"},"Email",-1),z=["readonly"],U=["textContent"],D=(0,n._)("label",{for:"transaction-guest-phone",class:"control-label"},"Phone",-1),A=["readonly"],q=["textContent"],S={class:"col-md-6"},F=(0,n._)("label",{for:"transaction-guest-adults",class:"control-label"},"Adults",-1),T=["readonly"],M=["textContent"],N=(0,n._)("label",{for:"transaction-guest-children",class:"control-label"},"Children",-1),j=["readonly"],R=["textContent"],H=(0,n._)("label",{for:"transaction-guest-owner",class:"control-label"},"Owned By",-1),Z=["readonly"],O=["textContent"],V={class:"modal-footer"},B=["disabled"],Q=(0,n._)("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"},"Close",-1);const G={__name:"TransactionGuest",props:{},emits:["updated"],setup:function(t,e){var a=e.expose,G=e.emit,P=(0,o.iH)(!1),E=(0,o.iH)(!1),I=(0,o.iH)(""),L=(0,o.iH)({}),W=(0,o.iH)({id:null,cancelled:!1,first_name:"",last_name:"",email:"",phone:"",adults:1,children:0,owner:""}),Y=function(){E.value=!1,I.value="",L.value={},W.value={id:null,cancelled:!1,first_name:"",last_name:"",email:"",phone:"",adults:1,children:0,owner:""}},$=function(){jQuery("#transaction-guest-modal").modal("hide"),Y()},J=function(){P.value||!E.value||W.value.cancelled||(I.value="",L.value={},P.value=!0,axios.post("/gpxadmin/transactions/guest/update/",W.value).then((function(t){t.data.success?($(),G("updated")):t.data.errors?(L.value=t.data.errors,I.value=t.data.message):I.value=t.data.message||"An error occurred while updating the guest details.",P.value=!1})).catch((function(t){var e,a;I.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while updating the guest details.",null!==(a=t.response)&&void 0!==a&&a.data.errors&&(L.value=t.response.data.errors),P.value=!1})))};return(0,n.bv)((function(){jQuery("#transaction-guest-modal").on("hidden.bs.modal",(function(t){return Y()}))})),a({open:function(t){P.value=!0,Y(),jQuery("#transaction-guest-modal").modal("show"),axios.get("/gpxadmin/transactions/guest/",{params:{transaction:t}}).then((function(t){t.data.success?(W.value=t.data.guest,E.value=!0):I.value=t.data.message||"An error occurred while retrieving the guest details.",P.value=!1})).catch((function(t){var e;I.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while retrieving the guest details.",P.value=!1}))},close:$}),function(t,e){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",r,[(0,n._)("div",c,[u,(0,n._)("div",d,[P.value&&!E.value?((0,n.wg)(),(0,n.iD)("div",f,_)):(0,n.kq)("",!0),(0,n._)("div",null,[I.value?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"alert alert-danger",textContent:(0,l.zw)(I.value)},null,8,p)):(0,n.kq)("",!0),W.value.cancelled?((0,n.wg)(),(0,n.iD)("div",b,"This transaction has been cancelled.")):(0,n.kq)("",!0),E.value?((0,n.wg)(),(0,n.iD)("form",{key:2,id:"transaction-guest-form",class:"details",onSubmit:(0,s.iM)(J,["prevent"])},[(0,n._)("fieldset",{class:"row",disabled:P.value},[(0,n._)("div",g,[(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":L.value.first_name}])},[m,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"transaction-guest-first_name","onUpdate:modelValue":e[0]||(e[0]=function(t){return W.value.first_name=t}),autocomplete:"off",readonly:W.value.cancelled},null,8,h),[[s.nr,W.value.first_name,void 0,{trim:!0}]]),L.value.first_name?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"help-block",textContent:(0,l.zw)(L.value.first_name[0])},null,8,y)):(0,n.kq)("",!0)],2),(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":L.value.last_name}])},[w,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"transaction-guest-last_name","onUpdate:modelValue":e[1]||(e[1]=function(t){return W.value.last_name=t}),autocomplete:"off",readonly:W.value.cancelled},null,8,x),[[s.nr,W.value.last_name,void 0,{trim:!0}]]),L.value.last_name?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"help-block",textContent:(0,l.zw)(L.value.last_name[0])},null,8,k)):(0,n.kq)("",!0)],2),(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":L.value.email}])},[C,(0,n.wy)((0,n._)("input",{type:"email",class:"form-control",id:"transaction-guest-email","onUpdate:modelValue":e[2]||(e[2]=function(t){return W.value.email=t}),autocomplete:"off",readonly:W.value.cancelled},null,8,z),[[s.nr,W.value.email,void 0,{trim:!0}]]),L.value.email?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"help-block",textContent:(0,l.zw)(L.value.email[0])},null,8,U)):(0,n.kq)("",!0)],2),(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":L.value.phone}])},[D,(0,n.wy)((0,n._)("input",{type:"tel",class:"form-control",id:"transaction-guest-phone","onUpdate:modelValue":e[3]||(e[3]=function(t){return W.value.phone=t}),autocomplete:"off",readonly:W.value.cancelled},null,8,A),[[s.nr,W.value.phone,void 0,{trim:!0}]]),L.value.phone?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"help-block",textContent:(0,l.zw)(L.value.phone[0])},null,8,q)):(0,n.kq)("",!0)],2)]),(0,n._)("div",S,[(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":L.value.adults}])},[F,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",id:"transaction-guest-adults",min:"1",step:"1","onUpdate:modelValue":e[4]||(e[4]=function(t){return W.value.adults=t}),autocomplete:"off",readonly:W.value.cancelled},null,8,T),[[s.nr,W.value.adults,void 0,{number:!0}]]),L.value.adults?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"help-block",textContent:(0,l.zw)(L.value.adults[0])},null,8,M)):(0,n.kq)("",!0)],2),(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":L.value.children}])},[N,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",id:"transaction-guest-children",min:"0",step:"1","onUpdate:modelValue":e[5]||(e[5]=function(t){return W.value.children=t}),autocomplete:"off",readonly:W.value.cancelled},null,8,j),[[s.nr,W.value.children,void 0,{number:!0}]]),L.value.children?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"help-block",textContent:(0,l.zw)(L.value.children[0])},null,8,R)):(0,n.kq)("",!0)],2),(0,n._)("div",{class:(0,l.C_)(["form-group",{"has-error":L.value.owner}])},[H,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"transaction-guest-owner","onUpdate:modelValue":e[6]||(e[6]=function(t){return W.value.owner=t}),autocomplete:"off",readonly:W.value.cancelled},null,8,Z),[[s.nr,W.value.owner,void 0,{trim:!0}]]),L.value.owner?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"help-block",textContent:(0,l.zw)(L.value.owner[0])},null,8,O)):(0,n.kq)("",!0)],2)])],8,v)],32)):(0,n.kq)("",!0)])]),(0,n._)("div",V,[(0,n._)("button",{form:"transaction-guest-form",type:"submit",class:"btn btn-success",disabled:P.value||!E.value||W.value.cancelled}," Update ",8,B),Q])])])])}}}},1597:(t,e,a)=>{a.d(e,{Z:()=>F});var n=a(9026),l=a(7401),s=a(7885),o=a(664),i=a(8654),r=a(904),c=a(9937),u=a(1037),d={class:"modal fade",id:"transaction-details-modal",tabindex:"-1",role:"dialog","aria-labelledby":"transaction-details-modal-label"},f={class:"modal-dialog modal-xl",role:"document"},_={class:"modal-content"},p=(0,n._)("div",{class:"modal-header"},[(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,n._)("span",{"aria-hidden":"true"},"×")]),(0,n._)("h4",{class:"modal-title",id:"transaction-details-modal-label"}," View Transaction ")],-1),b={class:"modal-body"},v={key:0},g=[(0,n._)("i",{class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},null,-1)],m=["textContent"],h={key:1,class:"details"},y={class:"row details-header"},w={class:"col-md-6"},x=["textContent"],k={class:"col-md-6"},C={style:{"text-align":"right"}},z={key:0,style:{display:"inline-block",width:"auto","margin-left":"auto"}},U=(0,n._)("h4",null,"Cancelled",-1),D={class:"row"},A={class:"col-md-4"},q={class:"col-md-4"},S={class:"col-md-4"};const F={__name:"TransactionPreview",emits:["updated"],setup:function(t,e){var a=e.expose,F=(e.emit,(0,s.iH)(!1)),T=(0,s.iH)(!1),M=(0,s.iH)(""),N=(0,s.iH)({}),j=(0,s.iH)({id:null}),R=(0,s.iH)({type:"cancel",action:"credit",amount:0}),H=function(){T.value=!1,M.value="",N.value={},j.value={id:null},R.value={type:"cancel",action:"credit",amount:0}},Z=function(){F.value=!0,axios.get("/gpxadmin/transactions/details/",{params:{transaction:j.value.id}}).then((function(t){t.data.success?(j.value=t.data.transaction,T.value=!0):M.value=t.data.message||"An error occurred while retrieving the transaction details.",F.value=!1})).catch((function(t){var e;M.value=(null===(e=t.response)||void 0===e?void 0:e.data.message)||"An error occurred while retrieving the transaction details.",F.value=!1}))};return(0,n.bv)((function(){jQuery("#transaction-details-modal").on("hidden.bs.modal",(function(t){return H()}))})),a({open:function(t){F.value=!0,H(),j.value.id=t,jQuery("#transaction-details-modal").modal("show"),Z()},close:function(){jQuery("#transaction-details-modal").modal("hide"),H()}}),function(t,e){return(0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",f,[(0,n._)("div",_,[p,(0,n._)("div",b,[F.value&&!T.value?((0,n.wg)(),(0,n.iD)("div",v,g)):(0,n.kq)("",!0),(0,n._)("div",null,[M.value?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"alert alert-danger",textContent:(0,l.zw)(M.value)},null,8,m)):(0,n.kq)("",!0),T.value?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",y,[(0,n._)("div",w,[(0,n._)("h3",null,"Transaction "+(0,l.zw)(j.value.id),1),(0,n._)("div",{textContent:(0,l.zw)(j.value.date)},null,8,x)]),(0,n._)("div",k,[(0,n._)("div",C,[j.value.cancelled?((0,n.wg)(),(0,n.iD)("div",z,[U,(0,n._)("div",null,(0,l.zw)(j.value.cancelled_date)+" by "+(0,l.zw)(j.value.cancelled_by),1)])):(0,n.kq)("",!0)])])]),(0,n._)("div",D,[(0,n._)("div",A,[(0,n.Wm)(i.Z,{readonly:"",transaction:j.value},null,8,["transaction"])]),(0,n._)("div",q,[j.value.is_booking?((0,n.wg)(),(0,n.j4)(o.Z,{key:0,transaction:j.value},null,8,["transaction"])):(0,n.kq)("",!0),j.value.is_guest?((0,n.wg)(),(0,n.j4)(u.Z,{key:1,transaction:j.value},null,8,["transaction"])):(0,n.kq)("",!0),j.value.deposit?((0,n.wg)(),(0,n.j4)(r.Z,{key:2,transaction:j.value},null,8,["transaction"])):(0,n.kq)("",!0)]),(0,n._)("div",S,[(0,n.Wm)(c.Z,{readonly:"",transaction:j.value},null,8,["transaction"])])])])):(0,n.kq)("",!0)])])])])])}}}}}]);