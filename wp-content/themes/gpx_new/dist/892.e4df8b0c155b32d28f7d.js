"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[892],{3892:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Y});var t=a(9026),n=a(7401),u=a(467),o=a(7885),i=(0,t._)("h3",null,"Guest Details",-1),s={key:0},r={key:0,class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},d=["textContent"],v=["textContent"],c=(0,t._)("div",null,"Select the guest.",-1),f={class:"guest-form-owners"},m=["onClick"],_={class:"font-bold mb-1"},p={class:"mt-2"},g=["onClick","textContent"],w=(0,t._)("div",{class:"font-bold mb-1"},"Add Guest",-1),b={key:0},h={key:0,style:{"text-decoration":"line-through"}},k={key:1},y={class:"mt-2"},C=["textContent"],x=["disabled"],q=(0,t._)("label",{for:"transaction-guest-first_name",class:"control-label required"}," First Name ",-1),D=["disabled"],z=["textContent"],U=(0,t._)("label",{for:"transaction-guest-last_name",class:"control-label required"},"Last Name",-1),H=["disabled"],A=["textContent"],M=(0,t._)("label",{for:"transaction-guest-email",class:"control-label required"},"Email",-1),I=["textContent"],S=(0,t._)("label",{for:"transaction-guest-phone",class:"control-label required"},"Phone",-1),V=["textContent"],F=(0,t._)("label",{for:"transaction-guest-adults",class:"control-label required"},"Adults",-1),G=["textContent"],$=(0,t._)("label",{for:"transaction-guest-children",class:"control-label required"},"Children",-1),N=["textContent"],E=["disabled"],P={id:"modal-guest-fees",class:"dialog dialog--opaque","data-width":"800","data-close-button":"false","data-move-to-body":"false","data-close-on-outside-click":"false"},j={class:"w-modal"},B={class:"member-form"},K={class:"w-form"},L=(0,t._)("h2",null,"Guest Fees Required",-1),R={class:"gform_wrapper"},T={key:0,style:{"text-decoration":"line-through"}},W={key:1};const Y={__name:"MemberProfileTransactionEditGuestInfo",props:{transaction_id:{type:Number,required:!0}},setup:function(e){var l=e,a=(0,o.iH)(""),Y=(0,o.iH)(!1),J=(0,o.iH)(!1),O=(0,o.iH)({}),Q=(0,o.iH)([]),X=(0,o.iH)({}),Z=(0,o.iH)(!1),ee=(0,o.iH)(-1),le=(0,o.iH)({}),ae=new ModalManager,te=function(){-2!==ee.value&&(!O.value.has_guest_fee||O.value.paid_guest_fee?(ee.value=-2,X.value.id=null,X.value.first_name="",X.value.last_name="",X.value.name="",X.value.email="",X.value.phone=""):se())},ne=function(e){if(e!==ee.value){var l=Q.value.find((function(l){return l.id===e}));l&&(ee.value=e,X.value.id=l.id,X.value.first_name=l.first_name,X.value.last_name=l.last_name,X.value.name=l.name,X.value.email=l.email,X.value.phone=l.phone)}},ue=function(){ae.closeAll()},oe=function(){Z.value=!0,ee.value=-2,X.value.first_name="",X.value.last_name="",X.value.name="",X.value.email="",X.value.phone="",ae.closeAll()},ie=function(){Z.value=!1,ee.value=-2,X.value.first_name="",X.value.last_name="",X.value.name="",X.value.email="",X.value.phone="",ae.closeAll()},se=function(){O.value.has_guest_fee&&!O.value.paid_guest_fee&&-2!==ee.value&&ae.activate("modal-guest-fees")},re=function(){!J.value&&Y.value&&(J.value=!0,a.value="",axios.post("/gpx/profile_transaction_guest_update",{transaction:l.transaction_id,guest:X.value,fee:!Z.value&&-2===ee.value}).then((function(e){if(e.data.success)return e.data.redirect?window.location=e.data.redirect:window.location.reload(),void(J.value=!1);a.value=e.data.message||"Failed to update guest info",le.value=e.data.errors||{},J.value=!1})).catch((function(e){console.error(e),a.value=(null==e?void 0:e.response.data.message)||"An error occurred while updating the guest details.",J.value=!1})))};return(0,t.bv)((function(){ae.add("modal-guest-fees"),J.value=!0,a.value="",axios.get("/gpx/profile_transaction_guest_modal/",{params:{transaction:l.transaction_id}}).then((function(e){var l,a;O.value=e.data.transaction,X.value=e.data.guest,Q.value=e.data.owners,Z.value=!1,ee.value=null!==(l=null===(a=e.data.owners[0])||void 0===a?void 0:a.id)&&void 0!==l?l:-1,J.value=!1,Y.value=!0})).catch((function(e){a.value=(null==e?void 0:e.response.data.message)||"An error occurred while loading the transaction.",J.value=!1}))})),function(e,l){return(0,t.wg)(),(0,t.iD)("div",null,[i,Y.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",s,[J.value?((0,t.wg)(),(0,t.iD)("div",r)):(0,t.kq)("",!0),a.value?((0,t.wg)(),(0,t.iD)("div",{key:1,class:"alert alert-danger mb-1",textContent:(0,n.zw)(a.value)},null,8,d)):(0,t.kq)("",!0)])),Y.value?((0,t.wg)(),(0,t.iD)("form",{key:1,onSubmit:(0,u.iM)(re,["prevent"])},[a.value?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"alert alert-danger mb-1",textContent:(0,n.zw)(a.value)},null,8,v)):(0,t.kq)("",!0),(0,t._)("div",null,[c,(0,t._)("div",f,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Q.value,(function(e){return(0,t.wg)(),(0,t.iD)("div",{class:(0,n.C_)(["guest-form-owner",{selected:ee.value===e.id}]),key:e.id,onClick:(0,u.iM)((function(l){return ne(e.id)}),["prevent"])},[(0,t._)("div",null,[(0,t._)("div",_,(0,n.zw)(e.first_name)+" "+(0,n.zw)(e.last_name),1)]),(0,t._)("div",p,[(0,t._)("button",{class:"btn btn-blue btn-xs guest-form-owner__selector",onClick:(0,u.iM)((function(l){return ne(e.id)}),["prevent","stop"]),textContent:(0,n.zw)(ee.value===e.id?"Selected":"Select")},null,8,g)])],10,m)})),128)),(0,t._)("div",{class:(0,n.C_)(["guest-form-owner",{selected:-2===ee.value}]),onClick:(0,u.iM)(te,["prevent"])},[(0,t._)("div",null,[w,O.value.has_guest_fee?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Uk)(" (a fee of "),O.value.fee_slash?((0,t.wg)(),(0,t.iD)("span",h," $"+(0,n.zw)(O.value.fee_slash),1)):((0,t.wg)(),(0,t.iD)("span",k," $"+(0,n.zw)(O.value.fee),1)),(0,t.Uk)(" will be applied) ")]))]),(0,t._)("div",y,[(0,t._)("button",{class:"btn btn-blue btn-xs guest-form-owner__selector",onClick:(0,u.iM)(te,["prevent","stop"]),textContent:(0,n.zw)(-2===ee.value?"Selected":"Select")},null,8,C)])],2)])]),(0,t._)("fieldset",{class:"grid grid-cols-1 grid-cols-md-2 gap-2",disabled:J.value},[(0,t._)("div",null,[(0,t._)("div",null,[q,(0,t.wy)((0,t._)("input",{type:"text",class:(0,n.C_)(["form-control w-full",{"has-error":le.value.first_name}]),id:"transaction-guest-first_name","onUpdate:modelValue":l[0]||(l[0]=function(e){return X.value.first_name=e}),autocomplete:"off",required:"",onInput:l[1]||(l[1]=function(e){return delete le.value.first_name}),disabled:-2!==ee.value},null,42,D),[[u.nr,X.value.first_name,void 0,{trim:!0}]]),le.value.first_name?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"form-error",textContent:(0,n.zw)(le.value.first_name?le.value.first_name[0]:"")},null,8,z)):(0,t.kq)("",!0)]),(0,t._)("div",null,[U,(0,t.wy)((0,t._)("input",{type:"text",class:(0,n.C_)(["form-control w-full",{"has-error":le.value.last_name}]),id:"transaction-guest-last_name","onUpdate:modelValue":l[2]||(l[2]=function(e){return X.value.last_name=e}),autocomplete:"off",required:"",onInput:l[3]||(l[3]=function(e){return delete le.value.last_name}),disabled:-2!==ee.value},null,42,H),[[u.nr,X.value.last_name,void 0,{trim:!0}]]),le.value.last_name?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"form-error",textContent:(0,n.zw)(le.value.last_name?le.value.last_name[0]:"")},null,8,A)):(0,t.kq)("",!0)]),(0,t._)("div",null,[M,(0,t.wy)((0,t._)("input",{type:"email",class:(0,n.C_)(["form-control w-full",{"has-error":le.value.email}]),id:"transaction-guest-email","onUpdate:modelValue":l[4]||(l[4]=function(e){return X.value.email=e}),autocomplete:"off",required:"",onInput:l[5]||(l[5]=function(e){return delete le.value.email})},null,34),[[u.nr,X.value.email,void 0,{trim:!0}]]),le.value.email?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"form-error",textContent:(0,n.zw)(le.value.email?le.value.email[0]:"")},null,8,I)):(0,t.kq)("",!0)]),(0,t._)("div",null,[S,(0,t.wy)((0,t._)("input",{type:"tel",class:(0,n.C_)(["form-control w-full",{"has-error":le.value.phone}]),id:"transaction-guest-phone","onUpdate:modelValue":l[6]||(l[6]=function(e){return X.value.phone=e}),autocomplete:"off",required:"",onInput:l[7]||(l[7]=function(e){return delete le.value.phone})},null,34),[[u.nr,X.value.phone,void 0,{trim:!0}]]),le.value.phone?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"form-error",textContent:(0,n.zw)(le.value.phone?le.value.phone[0]:"")},null,8,V)):(0,t.kq)("",!0)])]),(0,t._)("div",null,[(0,t._)("div",null,[F,(0,t.wy)((0,t._)("input",{type:"number",class:(0,n.C_)(["form-control w-full",{"has-error":le.value.adults}]),id:"transaction-guest-adults",min:"1",step:"1","onUpdate:modelValue":l[8]||(l[8]=function(e){return X.value.adults=e}),autocomplete:"off",required:"",onInput:l[9]||(l[9]=function(e){return delete le.value.adults})},null,34),[[u.nr,X.value.adults,void 0,{number:!0}]]),le.value.adults?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"form-error",textContent:(0,n.zw)(le.value.adults?le.value.adults[0]:"")},null,8,G)):(0,t.kq)("",!0)]),(0,t._)("div",null,[$,(0,t.wy)((0,t._)("input",{type:"number",class:(0,n.C_)(["form-control w-full",{"has-error":le.value.children}]),id:"transaction-guest-children",min:"0",onInput:l[10]||(l[10]=function(e){return delete le.value.children}),step:"1","onUpdate:modelValue":l[11]||(l[11]=function(e){return X.value.children=e}),autocomplete:"off",required:""},null,34),[[u.nr,X.value.children,void 0,{number:!0}]]),le.value.children?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"form-error",textContent:(0,n.zw)(le.value.children?le.value.children[0]:"")},null,8,N)):(0,t.kq)("",!0)])]),(0,t._)("div",null,[(0,t._)("button",{class:"btn btn-blue",type:"submit",disabled:J.value},"Update",8,E)])],8,x)],32)):(0,t.kq)("",!0),(0,t._)("dialog",P,[(0,t._)("div",j,[(0,t._)("div",B,[(0,t._)("div",K,[L,(0,t._)("div",R,[(0,t._)("h4",null,[(0,t.Uk)(" By continuing you acknowledge that a "),O.value.fee_slash?((0,t.wg)(),(0,t.iD)("span",T," $"+(0,n.zw)(O.value.fee_slash),1)):((0,t.wg)(),(0,t.iD)("span",W," $"+(0,n.zw)(O.value.fee),1)),(0,t.Uk)(" fee will be added to this transaction at checkout. ")]),(0,t._)("div",{class:"flex justify-start items-center gap-1"},[(0,t._)("button",{type:"button",onClick:ue,class:"btn"}," Cancel "),(0,t._)("button",{type:"button",onClick:oe,class:"btn btn-blue"}," Waive Fee "),(0,t._)("button",{type:"button",class:"btn btn-blue",onClick:ie}," Accept Fee ")])])])])])])])}}}}}]);