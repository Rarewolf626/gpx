"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[556],{7556:(e,l,a)=>{a.r(l),a.d(l,{default:()=>B});var t=a(7829),n=a(9608),u=a(3102),o=a(6685),s=(0,t.Lk)("h3",null,"Guest Details",-1),r={key:0},i={key:0,class:"fa fa-spinner fa-spin",style:{"font-size":"30px"}},d=["textContent"],v=["textContent"],c=(0,t.Lk)("div",null,"Select the guest.",-1),f={class:"guest-form-owners"},m=["onClick"],p={class:"font-bold mb-1"},k={class:"mt-2"},_=["onClick","textContent"],b=(0,t.Lk)("div",{class:"font-bold mb-1"},"Add Guest",-1),h={key:0},C={key:0,style:{"text-decoration":"line-through"}},g={key:1},L={class:"mt-2"},y=["textContent"],x=["disabled"],w=(0,t.Lk)("label",{for:"transaction-guest-first_name",class:"control-label required"}," First Name ",-1),E=["disabled"],X=["textContent"],q=(0,t.Lk)("label",{for:"transaction-guest-last_name",class:"control-label required"},"Last Name",-1),Q=["disabled"],K=["textContent"],R=(0,t.Lk)("label",{for:"transaction-guest-email",class:"control-label required"},"Email",-1),$=["textContent"],A=(0,t.Lk)("label",{for:"transaction-guest-phone",class:"control-label required"},"Phone",-1),I=["textContent"],U=(0,t.Lk)("label",{for:"transaction-guest-adults",class:"control-label required"},"Adults",-1),V=["textContent"],D=(0,t.Lk)("label",{for:"transaction-guest-children",class:"control-label required"},"Children",-1),F=["textContent"],J=["disabled"],S={id:"modal-guest-fees",class:"dialog dialog--opaque","data-width":"800","data-close-button":"false","data-move-to-body":"false","data-close-on-outside-click":"false"},W={class:"w-modal"},G={class:"member-form"},M={class:"w-form"},N=(0,t.Lk)("h2",null,"Guest Fees Required",-1),P={class:"gform_wrapper"},j={key:0,style:{"text-decoration":"line-through"}},z={key:1};const B={__name:"MemberProfileTransactionEditGuestInfo",props:{transaction_id:{type:Number,required:!0}},setup:function(e){var l=e,a=(0,o.KR)(""),B=(0,o.KR)(!1),T=(0,o.KR)(!1),H=(0,o.KR)({}),O=(0,o.KR)([]),Y=(0,o.KR)({}),Z=(0,o.KR)(!1),ee=(0,o.KR)(-1),le=(0,o.KR)({}),ae=new ModalManager,te=function(){-2!==ee.value&&(!H.value.has_guest_fee||H.value.paid_guest_fee?(ee.value=-2,Y.value.id=null,Y.value.first_name="",Y.value.last_name="",Y.value.name="",Y.value.email="",Y.value.phone=""):re())},ne=function(e){if(e!==ee.value){var l=O.value.find((function(l){return l.id===e}));l&&(ee.value=e,Y.value.id=l.id,Y.value.first_name=l.first_name,Y.value.last_name=l.last_name,Y.value.name=l.name,Y.value.email=l.email,Y.value.phone=l.phone)}},ue=function(){ae.closeAll()},oe=function(){Z.value=!0,ee.value=-2,Y.value.first_name="",Y.value.last_name="",Y.value.name="",Y.value.email="",Y.value.phone="",ae.closeAll()},se=function(){Z.value=!1,ee.value=-2,Y.value.first_name="",Y.value.last_name="",Y.value.name="",Y.value.email="",Y.value.phone="",ae.closeAll()},re=function(){H.value.has_guest_fee&&!H.value.paid_guest_fee&&-2!==ee.value&&ae.activate("modal-guest-fees")},ie=function(){!T.value&&B.value&&(T.value=!0,a.value="",axios.post("/gpx/profile_transaction_guest_update",{transaction:l.transaction_id,guest:Y.value,fee:!Z.value&&-2===ee.value}).then((function(e){if(e.data.success)return e.data.redirect?window.location=e.data.redirect:window.location.reload(),void(T.value=!1);a.value=e.data.message||"Failed to update guest info",le.value=e.data.errors||{},T.value=!1})).catch((function(e){console.error(e),a.value=(null==e?void 0:e.response.data.message)||"An error occurred while updating the guest details.",T.value=!1})))};return(0,t.sV)((function(){ae.add("modal-guest-fees"),T.value=!0,a.value="",axios.get("/gpx/profile_transaction_guest_modal/",{params:{transaction:l.transaction_id}}).then((function(e){var l,a;H.value=e.data.transaction,Y.value=e.data.guest,O.value=e.data.owners,Z.value=!1,ee.value=null!==(l=null===(a=e.data.owners[0])||void 0===a?void 0:a.id)&&void 0!==l?l:-1,T.value=!1,B.value=!0})).catch((function(e){a.value=(null==e?void 0:e.response.data.message)||"An error occurred while loading the transaction.",T.value=!1}))})),function(e,l){return(0,t.uX)(),(0,t.CE)("div",null,[s,B.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",r,[T.value?((0,t.uX)(),(0,t.CE)("div",i)):(0,t.Q3)("",!0),a.value?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"alert alert-danger mb-1",textContent:(0,n.v_)(a.value)},null,8,d)):(0,t.Q3)("",!0)])),B.value?((0,t.uX)(),(0,t.CE)("form",{key:1,onSubmit:(0,u.D$)(ie,["prevent"])},[a.value?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"alert alert-danger mb-1",textContent:(0,n.v_)(a.value)},null,8,v)):(0,t.Q3)("",!0),(0,t.Lk)("div",null,[c,(0,t.Lk)("div",f,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(O.value,(function(e){return(0,t.uX)(),(0,t.CE)("div",{class:(0,n.C4)(["guest-form-owner",{selected:ee.value===e.id}]),key:e.id,onClick:(0,u.D$)((function(l){return ne(e.id)}),["prevent"])},[(0,t.Lk)("div",null,[(0,t.Lk)("div",p,(0,n.v_)(e.first_name)+" "+(0,n.v_)(e.last_name),1)]),(0,t.Lk)("div",k,[(0,t.Lk)("button",{class:"btn btn-blue btn-xs guest-form-owner__selector",onClick:(0,u.D$)((function(l){return ne(e.id)}),["prevent","stop"]),textContent:(0,n.v_)(ee.value===e.id?"Selected":"Select")},null,8,_)])],10,m)})),128)),(0,t.Lk)("div",{class:(0,n.C4)(["guest-form-owner",{selected:-2===ee.value}]),onClick:(0,u.D$)(te,["prevent"])},[(0,t.Lk)("div",null,[b,H.value.has_guest_fee?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",h,[(0,t.eW)(" (a fee of "),H.value.fee_slash?((0,t.uX)(),(0,t.CE)("span",C," $"+(0,n.v_)(H.value.fee_slash),1)):((0,t.uX)(),(0,t.CE)("span",g," $"+(0,n.v_)(H.value.fee),1)),(0,t.eW)(" will be applied) ")]))]),(0,t.Lk)("div",L,[(0,t.Lk)("button",{class:"btn btn-blue btn-xs guest-form-owner__selector",onClick:(0,u.D$)(te,["prevent","stop"]),textContent:(0,n.v_)(-2===ee.value?"Selected":"Select")},null,8,y)])],2)])]),(0,t.Lk)("fieldset",{class:"grid grid-cols-1 grid-cols-md-2 gap-2",disabled:T.value},[(0,t.Lk)("div",null,[(0,t.Lk)("div",null,[w,(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,n.C4)(["form-control w-full",{"has-error":le.value.first_name}]),id:"transaction-guest-first_name","onUpdate:modelValue":l[0]||(l[0]=function(e){return Y.value.first_name=e}),autocomplete:"off",required:"",onInput:l[1]||(l[1]=function(e){return delete le.value.first_name}),disabled:-2!==ee.value},null,42,E),[[u.Jo,Y.value.first_name,void 0,{trim:!0}]]),le.value.first_name?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"form-error",textContent:(0,n.v_)(le.value.first_name?le.value.first_name[0]:"")},null,8,X)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",null,[q,(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,n.C4)(["form-control w-full",{"has-error":le.value.last_name}]),id:"transaction-guest-last_name","onUpdate:modelValue":l[2]||(l[2]=function(e){return Y.value.last_name=e}),autocomplete:"off",required:"",onInput:l[3]||(l[3]=function(e){return delete le.value.last_name}),disabled:-2!==ee.value},null,42,Q),[[u.Jo,Y.value.last_name,void 0,{trim:!0}]]),le.value.last_name?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"form-error",textContent:(0,n.v_)(le.value.last_name?le.value.last_name[0]:"")},null,8,K)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",null,[R,(0,t.bo)((0,t.Lk)("input",{type:"email",class:(0,n.C4)(["form-control w-full",{"has-error":le.value.email}]),id:"transaction-guest-email","onUpdate:modelValue":l[4]||(l[4]=function(e){return Y.value.email=e}),autocomplete:"off",required:"",onInput:l[5]||(l[5]=function(e){return delete le.value.email})},null,34),[[u.Jo,Y.value.email,void 0,{trim:!0}]]),le.value.email?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"form-error",textContent:(0,n.v_)(le.value.email?le.value.email[0]:"")},null,8,$)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",null,[A,(0,t.bo)((0,t.Lk)("input",{type:"tel",class:(0,n.C4)(["form-control w-full",{"has-error":le.value.phone}]),id:"transaction-guest-phone","onUpdate:modelValue":l[6]||(l[6]=function(e){return Y.value.phone=e}),autocomplete:"off",required:"",onInput:l[7]||(l[7]=function(e){return delete le.value.phone})},null,34),[[u.Jo,Y.value.phone,void 0,{trim:!0}]]),le.value.phone?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"form-error",textContent:(0,n.v_)(le.value.phone?le.value.phone[0]:"")},null,8,I)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",null,[(0,t.Lk)("div",null,[U,(0,t.bo)((0,t.Lk)("input",{type:"number",class:(0,n.C4)(["form-control w-full",{"has-error":le.value.adults}]),id:"transaction-guest-adults",min:"1",step:"1","onUpdate:modelValue":l[8]||(l[8]=function(e){return Y.value.adults=e}),autocomplete:"off",required:"",onInput:l[9]||(l[9]=function(e){return delete le.value.adults})},null,34),[[u.Jo,Y.value.adults,void 0,{number:!0}]]),le.value.adults?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"form-error",textContent:(0,n.v_)(le.value.adults?le.value.adults[0]:"")},null,8,V)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",null,[D,(0,t.bo)((0,t.Lk)("input",{type:"number",class:(0,n.C4)(["form-control w-full",{"has-error":le.value.children}]),id:"transaction-guest-children",min:"0",onInput:l[10]||(l[10]=function(e){return delete le.value.children}),step:"1","onUpdate:modelValue":l[11]||(l[11]=function(e){return Y.value.children=e}),autocomplete:"off",required:""},null,34),[[u.Jo,Y.value.children,void 0,{number:!0}]]),le.value.children?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"form-error",textContent:(0,n.v_)(le.value.children?le.value.children[0]:"")},null,8,F)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",null,[(0,t.Lk)("button",{class:"btn btn-blue",type:"submit",disabled:T.value},"Update",8,J)])],8,x)],32)):(0,t.Q3)("",!0),(0,t.Lk)("dialog",S,[(0,t.Lk)("div",W,[(0,t.Lk)("div",G,[(0,t.Lk)("div",M,[N,(0,t.Lk)("div",P,[(0,t.Lk)("h4",null,[(0,t.eW)(" By continuing you acknowledge that a "),H.value.fee_slash?((0,t.uX)(),(0,t.CE)("span",j," $"+(0,n.v_)(H.value.fee_slash),1)):((0,t.uX)(),(0,t.CE)("span",z," $"+(0,n.v_)(H.value.fee),1)),(0,t.eW)(" fee will be added to this transaction at checkout. ")]),(0,t.Lk)("div",{class:"flex justify-start items-center gap-1"},[(0,t.Lk)("button",{type:"button",onClick:ue,class:"btn"}," Cancel "),(0,t.Lk)("button",{type:"button",onClick:oe,class:"btn btn-blue"}," Waive Fee "),(0,t.Lk)("button",{type:"button",class:"btn btn-blue",onClick:se}," Accept Fee ")])])])])])])])}}}}}]);